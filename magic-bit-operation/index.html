<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=2,viewport-fit=cover"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><meta name="author" content="SimonAKing"><link rel="icon" type="image/x-icon" href="https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/favicon.ico"><link rel="shortcut icon" type="image/x-icon" href="https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/favicon.ico"><link rel="apple-touch-icon" href="https://cdn.jsdelivr.net/gh/SimonAKing/images/PWA/apple-touch-icon.png"><title>神奇的位运算</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/font/comic.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-roboto@1.1.13/index.min.css"><link id="style" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/css/style-eaf373873c.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/css/post-04c1b3d7ed.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/css/module/relatedPosts-1fcaaf0adb.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/css/module/comment-2c4172461a.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/firacode@5.2.0/distr/fira_code.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/css/highlight-d6d2f7ba38.css"><meta name="theme-color"><meta name="apple-mobile-web-app-status-bar-style"><meta name="msapplication-navbutton-color"><script>
	window.selectedColor = ''
	window.themeColor = localStorage.getItem("theme-color") || "#5275b0"
	window.changeColor = function(themeColor){
		document.documentElement.style.setProperty('--theme-color', themeColor);
		document.querySelector("meta[name=theme-color]").setAttribute("content", themeColor);
		document.querySelector("meta[name=apple-mobile-web-app-status-bar-style]").setAttribute("content", themeColor);
		document.querySelector("meta[name=msapplication-navbutton-color]").setAttribute("content", themeColor);
		localStorage.setItem('theme-color', themeColor)
	}
	changeColor(themeColor)

	window.isPhone = /Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent) || (window.innerWidth < 1300)
	window.isHome = false
	window.isPost = true
	if(window.isPost){
		window.isReward = true
		window.isWeibo = false
	}
</script><link rel="manifest" href="https://simonaking.com/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="mobile-web-app-title" content="SimonAKing"><meta name="msapplication-starturl" content="https://simonaking.com"><meta name="application-name" content="SimonAKing"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SimonAKing"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="prefetch" href="https://cdn.jsdelivr.net/"><link rel="dns-prefetch" href="https://api.github.com/"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-109696496-3"></script><script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-109696496-3');
</script><link rel="canonical" href="https://simonaking.com/blog/magic-bit-operation/"><link rel="alternate" type="application/atom+xml" title="SimonAKing" href="/blog/atom.xml"><meta property="og:title" content="神奇的位运算 | SimonAKing"><meta property="og:site_name" content="SimonAKing"><meta property="og:type" content="article"><meta property="og:url" content="https://simonaking.com/blog/magic-bit-operation/"><meta property="og:locale" content="zh-CN"><meta name="description" content="位运算讲解。 - SimonAKing - SimonAKing"><meta name="keywords" content="二进制,与或非 运算,C 语言,后端,位运算,SimonAKing,Blog,博客"><meta property="article:published_time" content="2018-01-25T08:32:02.000Z"><meta property="article:modified_time" content="2025-05-02T08:30:48.880Z"><meta property="og:updated_time" content="2025-05-02T08:30:48.880Z"><meta property="article:author" content="SimonAKing"><meta property="article:tag" content="二进制,与或非 运算,C 语言,后端,位运算,SimonAKing,Blog,博客"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="https:&#x2F;&#x2F;simonaking.com&#x2F;blog&#x2F;magic-bit-operation&#x2F;"><meta name="twitter:creator" content="SimonAKing"><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "url": "https://simonaking.com/blog/magic-bit-operation/",
    "@type": "BlogPosting",
    "logo": "https://simonaking.com/images/PWA/192.png",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://simonaking.com/blog/magic-bit-operation/"
    },
    "headline": "神奇的位运算 | SimonAKing",
    "image": {
        "@type": "ImageObject",
        "url": "https://simonaking.com/images/PWA/192.png"
    },
    "datePublished": "2018-01-25T08:32:02.000Z",
    "dateModified": "2025-05-02T08:30:48.880Z",
    "author": {
        "@type": "Person",
        "name": "SimonAKing",
        "image": {
            "@type": "ImageObject",
            "url": "https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/avatar.jpg"
        },
        "description": "STDIN | Think &gt;&gt; /dev/Mind"
    },
    "publisher": {
        "@type": "Organization",
        "name": "SimonAKing",
        "logo": {
            "@type": "ImageObject",
            "url": "https://simonaking.com/images/PWA/192.png"
        }
    },
    "keywords": "二进制,与或非 运算,C 语言,后端,位运算,SimonAKing,Blog,博客",
    "description": "位运算讲解。 - SimonAKing - SimonAKing"
}
</script><!--[if lt IE 9]><style> .alert { padding: 15px; margin-bottom: 20px; border: 1px solid transparent; border-radius: 4px } .alert-danger { background-color: #f2dede; border-color: #ebccd1; color: #a94442; border-bottom: 1px solid #ebccd1 } .alert-link { color: #843534; font-weight: bold } .topframe { margin: 0; padding-left: 15px; padding-right: 15px; text-align: center; border-radius: 0; position: fixed; left: 0; right: 0; top: 0; z-index: 1000 } </style><div class="alert alert-danger topframe"> 你的浏览器实在<strong>太太太太太太旧了</strong>，放学别走，升级完浏览器再说！ <a target="_blank" class="alert-link" href="//browsehappy.com">立即升级</a></div><script src="https://cdn.bootcss.com/html5shiv/r29/html5.min.js"></script><script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script><![endif]--></head><body itemscope itemtype="http://schema.org/WebPage"><aside id="menu" class="hide"><div class="inner flex-row-vertical"><div class="brand-wrap" itemprop="author" itemscope itemtype="http://schema.org/Person"><div class="brand fade"> <a class="avatar waves-effect waves-circle waves-light"><img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/avatar.jpg" title="avatar" alt="avatar" itemprop="image"></a><div class="introduce"><h5 class="nickname " id="name">SimonAKing</h5><div class="links-of-author fade"><span class="links-of-author-item" id="link-wechat"><a href="javascript:void(0)" rel="noopener noreferrer" title="Wechat"><i class="icon icon-lg icon-wechat"></i></a></span><span class="links-of-author-item"><a href="mailto:hi@simonaking.com" rel="noopener noreferrer" target="_blank" title="Email"><i class="icon icon-lg icon-email"></i></a></span><span class="links-of-author-item"><a href="https://x.com/simon_aking" rel="external nofollow noopener noreferrer" target="_blank" title="X"><i class="icon icon-lg icon-XTwitter"></i></a></span><span class="links-of-author-item"><a href="https://github.com/SimonAKing" rel="external nofollow noopener noreferrer" target="_blank" title="Github"><i class="icon icon-lg icon-github"></i></a></span></div><div class="statistics"><ul><li><a class="total-link" href="/blog/weibo/"><div class="count" id="weibo-count">∞</div><div class="type">微博</div></a></li><li><a class="total-link" href="/blog/archives/"><div class="count">32</div><div class="type">文章</div></a></li><li><a class="total-link" href="/gallery/"><div class="count" id="photo-count">∞</div><div class="type">相册</div></a></li></ul></div></div></div></div><div class="scroll-wrap flex-col"><ul class="nav fade"><li class="items waves-block waves-effect"><a href="/blog/"><i class="icon icon-lg icon-xiazai45"></i> <span style="font-size:1em">主 页</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="/blog/archives/"><i class="icon icon-lg icon-guidangxiangmu"></i> <span style="font-size:1em">归 档</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="/blog/tags/"><i class="icon icon-lg icon-biaoqian"></i> <span style="font-size:1em">标 签</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="/blog/weibo/"><i class="icon icon-lg icon-biaoqing"></i> <span style="font-size:1em">微 博</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="//simonaking.com/gallery/"><i class="icon icon-lg icon-xiangce"></i> <span style="font-size:1em">相 册</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="//simonaking.com/about/"><i class="icon icon-lg icon-zhifeiji"></i> <span style="font-size:1em">关 于</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="//simonaking.com/projects/"><i class="icon icon-lg icon-projects"></i> <span style="font-size:1em">项 目</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="//thinking.simonaking.com/" target="_blank" rel="noopener"><i class="icon icon-lg icon--Idea"></i> <span style="font-size:1em">思 考</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="//simonaking.com"><i class="icon icon-lg icon-icon--"></i> <span style="font-size:1em">导航</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><div class="sliding-bar"></div></ul><div class="nav-tool"><a class="nav-tool-item exchange" data-title="简繁互换" href="javascript:translatePage();"><i class="fade icon icon-lg icon-zhuanhuan custom-exchange"></i></a><a class="nav-tool-item picker" data-title="调色板" id="color-picker-icon"><i class="fade icon icon-lg icon-color-palette-outlin custom-picker"></i></a><a class="nav-tool-item light" data-title="关灯" href="javascript:switchNightMode();"><i class="fade icon icon-lg icon-lightbulbo custom-lightbulb"></i></a></div></div></div></aside><main id="main" class="in_post"><header class="top-header in_post" id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="flex-row"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"><i class="icon icon-lg icon-naviconround"></i></a><div class="flex-col"></div><div class="search-wrap" id="search-wrap"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="icon icon-lg icon-chevronleft"></i></a> <input type="text" id="key" aria-label="search" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字"><a href="javascript:;" title="搜索" class="header-icon waves-effect waves-circle waves-light" id="search"><i class="icon icon-lg icon-search"></i></a></div></div><div class="header-title ellipsis">神奇的位运算</div></header><header class="content-header post-header"><canvas class="flickering-grid-canvas"></canvas></header><div class="container body-wrap"><aside class="post-widget"><nav class="post-toc-wrap fade" id="post-toc"><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#正文"><span class="post-toc-number">2.</span> <span class="post-toc-text">正文</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#and-运算"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">and 运算</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#amp-1"><span class="post-toc-number">2.1.1.</span> <span class="post-toc-text">&amp; 1</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#amp-0"><span class="post-toc-number">2.1.2.</span> <span class="post-toc-text">&amp; 0</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#or-运算"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">or 运算</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">| 1</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">| 0</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#xor-运算"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">xor 运算</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-1"><span class="post-toc-number">2.3.1.</span> <span class="post-toc-text">^ 1</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0-1"><span class="post-toc-number">2.3.2.</span> <span class="post-toc-text">^ 0</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#shl-amp-shr-运算"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">shl &amp; shr 运算</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#应用"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">应用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#对-2-的整数幂进行模运算"><span class="post-toc-number">2.5.1.</span> <span class="post-toc-text">对 2 的整数幂进行模运算</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#两数交换"><span class="post-toc-number">2.5.2.</span> <span class="post-toc-text">两数交换</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#判断-2-的正整数幂"><span class="post-toc-number">2.5.3.</span> <span class="post-toc-text">判断 2 的正整数幂</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#判断奇偶性"><span class="post-toc-number">2.5.4.</span> <span class="post-toc-text">判断奇偶性</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#其他方面"><span class="post-toc-number">2.5.5.</span> <span class="post-toc-text">其他方面</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#结束语"><span class="post-toc-number">3.</span> <span class="post-toc-text">结束语</span></a></li></ol></nav></aside><article id="post-神奇的位运算" class="post-article article-type-post fade" itemscope itemtype="http://schema.org/Article"><div class="post-card"><h1 class="post-card-title" itemprop="name headline">&nbsp;</h1><script>
			window.addEventListener('DOMContentLoaded', function (){ var postTitle = document.querySelector('.post-card-title'); var typingbefore = '神奇的位运算'; var _i = 0; function typetitle() { if (_i <= typingbefore.length) { postTitle.innerHTML = `${typingbefore.slice(0, _i++)}|`; setTimeout(typetitle, 120); } else { postTitle.innerHTML = typingbefore; } } typetitle(); })
		</script><div class="post-meta"><div class="post-category-phone"><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/blog/categories/%E5%90%8E%E7%AB%AF/">后端</a></li></ul></div> <time itemprop="dateCreated datePublished" class="post-time" title="2018-01-25 16:32:02" datetime="2018-01-25T08:32:02.000Z">2018-01-25</time></div><link itemprop="mainEntityOfPage" href="https://simonaking.com/blog/magic-bit-operation/" style="display:none"><div class="post-content" id="post-content" itemprop="articleBody"><p>位运算在计算机领域的作用可谓举足轻重。<a id="more"></a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;首先，我们要了解一个概念：<strong>程序中的所有数在计算机内存中都是以二进制的形式储存的</strong>。而位运算，就是直接对在内存中的二进制位进行操作，跳过了 程序转义成二进制的这一步骤，对编译时间有所提高，但带来的缺点也很明显，程序的可读性变低了。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;掌握位运算 是一位程序员的基本素养，位运算在计算机领域的作用可谓举足轻重。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;下面我将讲解 位运算的大体方法以及一些基本的应用。</p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="and-运算"><a href="#and-运算" class="headerlink" title="and 运算"></a>and 运算</h3><blockquote><p>只有对应的两个 二进制数，均为 1，结果才为 1，否则为 0</p></blockquote><h4 id="amp-1"><a href="#amp-1" class="headerlink" title="&amp; 1"></a>&amp; 1</h4><p><strong>判断 n 的第 m 位数</strong>。</p><p>介绍两个重要应用，来证明其含义：</p><ol><li>(n &gt;&gt;m ) &amp; 1 判断 整数 n 的二进制 第 m 位 是否 为 1 或者 为 0 n 的第 m 位数，如果为 1 ，1&amp;1 就返回 1 ，如果为 0，0&amp;1 就返回 0</li><li>判断 奇偶性 如果 n 为奇数，辗转相除 2，最后的余数 必定为 1，如果 n 为偶数，辗转相除 余数必定为 0 也就是说，n 为奇数，n&amp;1 等价于 1&amp;1 ，返回 1，n 为偶数，n&amp;1 等价于 0&amp;1，返回 0</li></ol><h4 id="amp-0"><a href="#amp-0" class="headerlink" title="&amp; 0"></a>&amp; 0</h4><p><strong>将 n 的第 m 位数，重置为 0</strong> 基本应用：n &amp; ~(1 &lt;&lt; m)</p><ol><li><p>1 &lt;&lt; m 定位到 n 的第 m 位数</p></li><li><p>~(1 &lt;&lt; m) 将 1 进行非运算，变为 0，其他剩下的 m 位，变成 1，而 &amp;1，是无实际作用的</p></li><li><p>n &amp; 0 ：&amp; 按位与运算 只有对应的两个数 全部为 1 时，结果才为 1，而&amp;0，返回值一定为 0</p></li></ol><h3 id="or-运算"><a href="#or-运算" class="headerlink" title="or 运算"></a>or 运算</h3><blockquote><p>只有对应的两个 二进制数，均为 0，结果才为 0，否则为 1</p></blockquote><h4 id="1"><a href="#1" class="headerlink" title="| 1"></a>| 1</h4><p><strong>将 n 的第 m 位数，重置为 1</strong></p><p>基本应用：n | (1 &lt;&lt; m):</p><ol><li><p>1 &lt;&lt; m 定位到 n 的第 m 位数</p></li><li><p>n | 1 n 的第 m 位数 进行 |1 操作 其返回值必定为 1！ 因为|只有，两个数都为 0 时，结果才为 0</p></li></ol><h4 id="0"><a href="#0" class="headerlink" title="| 0"></a>| 0</h4><p>无实际作用</p><p>一定要清楚， 是 n 的第 m 位数 在进行操作，其他 位数操作，根本无 影响</p><p>因为，其他位数，是 在进行 “| 0” 操作，而所谓的 |0 操作，与 &amp;1 操作，毫无差别。</p><p>假设 k=n 的第 m 位数，k = 1 ，k|0 = 1|0 = 1，k = 0，k|0 = 0|0 = 0，所谓 无实际作用。</p><p>但是要注意一点，我说的 0 是在二进制数中的 0，有实际含义的 0，不是补 0 的 0</p><p>所以，可以感性的认识到，| 0 与 &amp; 1 以及 下文的 ^ 0，都是无实际作用的</p><h3 id="xor-运算"><a href="#xor-运算" class="headerlink" title="xor 运算"></a>xor 运算</h3><blockquote><p>只有对应的两个 二进制数相等时，结果才为 0，否则为 1</p></blockquote><h4 id="1-1"><a href="#1-1" class="headerlink" title="^ 1"></a>^ 1</h4><p><strong>将 n 的第 m 位数，取反</strong></p><p>基本应用：n ^ (1 &lt;&lt; m)</p><ol><li><p>1 &lt;&lt; m ： 定位到 n 的第 m 位数</p></li><li><p>n ^ 1，我们要知道，^ (异或）：不相等为 1，相等为 0</p></li></ol><p>而 ^1：如果 n 的第 m 位数 为 1，1^1 返回值为 0，如果 n 的第 m 位数 为 0，0^1 返回值 为 1</p><p>所以，^1 的重要作用，就是 与之相反的作用</p><h4 id="0-1"><a href="#0-1" class="headerlink" title="^ 0"></a>^ 0</h4><p>无实际作用</p><p> 假定 整数 k 为 0，k^0 = 0^0 = 0 ; 假定整数 k 为 1，k^0 = 1^0 = 1</p><p>所以说，无论怎么变化，^0 都是无实际作用的</p><h3 id="shl-amp-shr-运算"><a href="#shl-amp-shr-运算" class="headerlink" title="shl &amp; shr 运算"></a>shl &amp; shr 运算</h3><ol><li><strong>左移运算符 “&lt;&lt;”</strong> 表达式：a &lt;&lt; b a&lt;&lt;b 的值是：将 a 各二进位全部左移 b 位后得到的值。左移时，高位丢弃，低位补 0。 实际上，左移 1 位，就等于是乘以 2，左移 n 位，就等于是乘以 2n。 而左移操作比乘法操作快得多。<figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line">例如:<span class="number">9</span> &lt;&lt; <span class="number">4</span></span><br><span class="line"><span class="number">9</span>的二进制形式：<span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1001</span></span><br><span class="line">因此，表达式“<span class="number">9</span>&lt;&lt;<span class="number">4</span>”的值，就是将上面的二进制数左移<span class="number">4</span>位，得：</span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1001</span> <span class="number">0000</span></span><br><span class="line">即为十进制的<span class="number">144</span> , 而 <span class="number">9</span>*<span class="number">2</span>的<span class="number">4</span>次幂 = <span class="number">9</span>*<span class="number">16</span> = <span class="number">144.</span></span><br></pre></td></tr></tbody></table></figure></li><li><strong>右移运算符 “&gt;&gt;”</strong> 表达式：a &gt;&gt; b a&gt;&gt;b 的值是：将 a 各二进位全部右移 b 位后得到的值。右移时，移出最右边的位就被丢弃。 对于有符号数，如 long,int,short,char 类型变量，在右移时，符号位（即最高位）将一起移动，并且大多数 C/C++编译器规定，如果原符号位为 1，则右移时高位就补充 1，原符号位为 0，则右移时高位就补充 0。<figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line">实际上，右移 n 位，就相当于左操作数除以<span class="number">2</span>n，并且将结果往小里取整。</span><br><span class="line">例如：<span class="number">-25</span> &gt;&gt; <span class="number">4</span> = <span class="number">-2</span>   <span class="number">-2</span> &gt;&gt; <span class="number">4</span> = <span class="number">-1</span>   <span class="number">18</span> &gt;&gt; <span class="number">4</span> = <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><h4 id="对-2-的整数幂进行模运算"><a href="#对-2-的整数幂进行模运算" class="headerlink" title="对 2 的整数幂进行模运算"></a>对 2 的整数幂进行模运算</h4><figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n,k;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;k)){</span><br><span class="line">        n&lt;&lt;=k;<span class="comment">//相当于 n 乘以 2 的 k 次幂，并将结果赋给 n</span></span><br><span class="line"></span><br><span class="line">        n&gt;&gt;=k;<span class="comment">//相当于 n 除以 2 的 k 次幂，并将结果赋给 n</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,n);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="两数交换"><a href="#两数交换" class="headerlink" title="两数交换"></a>两数交换</h4><figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m)){</span><br><span class="line">        n^=m;</span><br><span class="line">        m^=n;</span><br><span class="line">        n^=m;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,n,m);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p>按位异或 ^ : 不相同 为：1 ; 相同 为 ：0 将参与运算的两操作数各对应的二进制位进行异或操作， 即只有对应的两个二进位不相同时，结果的对应二进制位才是 1，否则为 0。</p></blockquote></li></ol><p><strong>异或运算的特点是：如果 a^b=c，那么就有 c^b = a 以及 c^a=b</strong></p><figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line">例如：表达式“<span class="number">21</span> ^ <span class="number">18</span> ”的值是<span class="number">7</span>(即二进制数<span class="number">111</span>)。</span><br><span class="line"><span class="number">21</span>：    <span class="number">10101</span></span><br><span class="line"><span class="number">18</span>：    <span class="number">10010</span></span><br><span class="line"><span class="number">21</span>^<span class="number">18</span>:  <span class="number">00111</span></span><br><span class="line"></span><br><span class="line">假设 n = <span class="number">5</span>，m = <span class="number">6</span></span><br><span class="line"><span class="number">5</span>的二进制为：<span class="number">101</span></span><br><span class="line"><span class="number">6</span>的二进制为：<span class="number">110</span></span><br><span class="line"></span><br><span class="line">n^=m = <span class="number">5</span>^=<span class="number">6</span>   = <span class="number">101</span> ^ <span class="number">110</span> = <span class="number">011</span> ,</span><br><span class="line">此时 n 的二进制为：<span class="number">011</span></span><br><span class="line"></span><br><span class="line">m^=n = <span class="number">6</span>^=<span class="number">011</span> = <span class="number">110</span> ^ <span class="number">011</span> = <span class="number">101</span> ,</span><br><span class="line">此时 m 的二进制为：<span class="number">101</span>，也正是 <span class="number">5</span>的二进制数，也就是说 m ==开始的 n</span><br><span class="line"></span><br><span class="line">n^=m = <span class="number">011</span>^=<span class="number">5</span> = <span class="number">011</span> ^ <span class="number">101</span> = <span class="number">110</span> ,</span><br><span class="line">此时 n 的二进制位：<span class="number">110</span>，也正是 <span class="number">6</span>的二进制数，也就是说 n ==开始的 m</span><br></pre></td></tr></tbody></table></figure><p>层次结构：A-&gt;B B-&gt;A A-&gt;B 正 反 正</p><h4 id="判断-2-的正整数幂"><a href="#判断-2-的正整数幂" class="headerlink" title="判断 2 的正整数幂"></a>判断 2 的正整数幂</h4><figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)){</span><br><span class="line">        <span class="keyword">if</span>(!(n &amp; (n<span class="number">-1</span>)) &amp;&amp; n)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d 为 2 的正整数幂\n"</span>,n);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d 不是 2 的正整数幂\n"</span>,n);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p>给定整数 n 判断 n 是否为 2 的正整数幂 表达式：(! (n &amp; (n-1)) &amp;&amp; n</p></blockquote><figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line">举个例子： n = <span class="number">16</span> = <span class="number">10000</span>，n<span class="number">-1</span> = <span class="number">15</span> = <span class="number">1111</span></span><br><span class="line">那么 ：<span class="number">10000</span> &amp; <span class="number">01111</span> = <span class="number">00000</span> = <span class="number">0</span></span><br><span class="line">再举个例子： n = <span class="number">256</span> = <span class="number">10000000</span> ,n<span class="number">-1</span> = <span class="number">255</span> = <span class="number">11111111</span></span><br><span class="line">那么：<span class="number">100000000</span> &amp; <span class="number">011111111</span> = <span class="number">000000000</span> = <span class="number">0</span></span><br></pre></td></tr></tbody></table></figure><p>是的，如果一个数 n 是 2 的正整数幂，那么 n 的二进制必定为 1000…. n-1 的二进制必定为 1111…. <strong>即： n &amp; n-1 = 0 所以 (! (n &amp; (n-1)) 为 1 ; &amp;&amp; n ：判断 n 为正数</strong></p><h4 id="判断奇偶性"><a href="#判断奇偶性" class="headerlink" title="判断奇偶性"></a>判断奇偶性</h4><figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)){</span><br><span class="line">        <span class="keyword">if</span>(n&amp;<span class="number">1</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d 是奇数\n"</span>,n);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d 是偶数\n"</span>,n);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>记住：在做位运算时，位数不够的数，自动在 前面补 0</strong> 比如：21 &amp; 1 ：10101 &amp; 00001 = 00001 = 1 16 &amp; 1 ：10000 &amp; 00001 = 00000 = 0 事实证明：偶数的二进制的末尾 为 0，奇数的二进制的末尾 为 1</p><p>十进制 m 转换 n 进制方法： m 一直除 n，每相除一次，m 就等于商，直到商为 0，然后余数反排 即可。</p><figure class="highlight angelscript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="number">1</span>的二进制：<span class="number">1</span>/<span class="number">2</span> =<span class="number">0</span> 余<span class="number">1</span></span><br><span class="line">余数反排 即是 <span class="number">1</span>的二进制：<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">6</span>的二进制：<span class="number">6</span>/<span class="number">2</span> =<span class="number">3</span> 余<span class="number">0</span></span><br><span class="line">          <span class="number">3</span>/<span class="number">2</span> =<span class="number">1</span> 余<span class="number">1</span></span><br><span class="line">          <span class="number">1</span>/<span class="number">2</span> =<span class="number">0</span> 余<span class="number">1</span></span><br><span class="line">余数反排 即是 <span class="number">6</span>的二进制：<span class="number">110</span></span><br><span class="line"></span><br><span class="line"><span class="number">15</span>的二进制：<span class="number">15</span>/<span class="number">2</span>=<span class="number">7</span> 余<span class="number">1</span></span><br><span class="line">           <span class="number">7</span>/<span class="number">2</span>=<span class="number">3</span> 余<span class="number">1</span></span><br><span class="line">           <span class="number">3</span>/<span class="number">2</span>=<span class="number">1</span> 余<span class="number">1</span></span><br><span class="line">           <span class="number">1</span>/<span class="number">2</span>=<span class="number">0</span> 余<span class="number">1</span></span><br><span class="line">余数反排 即是 <span class="number">15</span>的二进制：<span class="number">1111</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span>的二进制：<span class="number">5</span>/<span class="number">2</span> =<span class="number">2</span> 余<span class="number">1</span></span><br><span class="line">          <span class="number">2</span>/<span class="number">2</span> =<span class="number">1</span> 余<span class="number">0</span></span><br><span class="line">          <span class="number">1</span>/<span class="number">2</span> =<span class="number">0</span> 余<span class="number">1</span></span><br><span class="line">余数反排 即是 <span class="number">5</span>的二进制：<span class="number">101</span></span><br><span class="line"></span><br><span class="line"><span class="number">21</span>的二进制：<span class="number">21</span>/<span class="number">2</span> =<span class="number">10</span> 余<span class="number">1</span></span><br><span class="line">           <span class="number">10</span>/<span class="number">2</span> =<span class="number">5</span> 余<span class="number">0</span></span><br><span class="line">           <span class="number">5</span>/<span class="number">2</span> =<span class="number">2</span> 余<span class="number">1</span></span><br><span class="line">           <span class="number">2</span>/<span class="number">2</span> =<span class="number">1</span> 余<span class="number">0</span></span><br><span class="line">           <span class="number">1</span>/<span class="number">2</span> =<span class="number">0</span> 余<span class="number">1</span></span><br><span class="line">余数反排 即是 <span class="number">21</span>的二进制：<span class="number">10101</span></span><br></pre></td></tr></tbody></table></figure><h4 id="其他方面"><a href="#其他方面" class="headerlink" title="其他方面"></a>其他方面</h4><blockquote><p>(n &gt;&gt; m) &amp; 1 == (n &gt;&gt; m) | 0 == (n &gt;&gt; m) ^ 0</p><p>n &amp; ~(1 &lt;&lt; m) : 将 n 的第 m 位数，重置为 0</p><p>n | (1 &lt;&lt; m) : 将 n 的第 m 位数，重置为 1</p><p>n ^ (1 &lt;&lt; m) : 将 n 的第 m 位数，取其相反</p></blockquote><hr><h2 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h2><p>欢迎转载本站文章，请注明作者和出处 <a href="http://simonaking.com">simonaking.com</a>。</p></div><div class="recommended_posts"><div class="recommended_wrap"><h2 class="recommended_title">相关文章</h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"> <a href="/blog/build-static-site-generator-nodejs/" rel="bookmark">手撸一个静态文档生成器[译]</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"> <a href="/blog/the-top-10-most-common-mistakes-ive-seen-in-go-projects/" rel="bookmark">Go 开发中的十大常见陷阱[译]</a></div></li></ul></div></div><blockquote class="post-copyright"><div class="content"> <span class="post-time">最后更新：<time datetime="2025-05-02T08:30:48.880Z">2025-05-02 16:30:48</time></span> 原文链接：<a href="/blog/magic-bit-operation/" target="_blank" rel="external">https://simonaking.com/blog/magic-bit-operation/</a></div><footer><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/" rel="tag">位运算</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E5%90%8E%E7%AB%AF/" rel="tag">后端</a></li></ul><div> <img itemprop="image" lass="copyimg" src="https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/avatar.jpg" alt="SimonAKing"> <a itemprop="author" itemscope itemtype="http://schema.org/Person" href="/blog">SimonAKing</a></div></footer></blockquote></div><section class="comments" id="comments"><div id="disqus_thread"></div></section></article></div></main><div class="mask" id="mask"></div><a href="javascript:;" id="gotop" class="fade-scale waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevronup"></span></a><div class="search-panel in_post" id="search-panel"><ul class="search-result" id="search-result"></ul></div><template id="search-tpl"><li class="item waves-block waves-effect" onclick="location.href='{path}'" data-path="{path}"><div class="title ellipsis" title="{title}">{title}</div></li></template><div id="color-picker" class="page-modal"><a class="close" href="javascript:;"><i class="icon icon-close2"></i></a><br><h4><i class="icon icon-quote-left"></i> <span>RGB调色实验室 🎨</span><i class="icon icon-quote-right"></i></h4><div id="color-picker-container"></div></div><div id="wechat" class="page-modal wechat-wrap"><a class="close" href="javascript:;"><i class="icon icon-close2"></i></a><br><h4 class="wechat-title"> <span style="font-size: 18px">欢迎添加我的微信，进群交流、学习<br><i class="icon icon-quote-left"></i> simonaking<i class="icon icon-quote-right"></i></span></h4> <img id="wechat_img" src="https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/wx.png" alt="欢迎您的关注！" style="margin-top: 5%"></div><script src="https://simonaking.com/registerSW.js?v=7d04115230169"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/js/log.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/src/js/waves.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/headroom.js@0.12.0/dist/headroom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5.2.3/dist/iro.min.js"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/particles-585dd6bbf8.js"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/main-c5641580d9.js"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/script-66d90ba09e.js"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/module/hover-effect-e72a114ce3.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/module/post-6d3f729af5.js"></script><script defer src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/module/comment-5cad405b01.js"></script><script defer src="https://cdn.jsdelivr.net/gh/SimonAKing/js/translate-ff7607fcb8.js"></script></body></html>