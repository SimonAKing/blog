function getQL(){return{operationName:"getRepoInfo",query:'\n\tquery getRepoInfo($owner: String = "SimonAKing", $weibo: String = "weibo", $gallery: String = "gallery") {\n\t\trepository(owner: $owner, name: $weibo) {\n\t\t\tissues(filterBy: {createdBy: $owner, states: OPEN}) {\n\t\t\t\ttotalCount\n\t\t\t}\n\t\t}\n\t\trepositoryOwner(login: $owner) {\n\t\t\trepository(name: $gallery) {\n\t\t\t\tdescription\n\t\t\t}\n\t\t}\n\t}\n\t'}}function getGithubCount(t,e){$.ajax({url:"https://api.github.com/graphql",type:"post",data:JSON.stringify(getQL()),headers:{Accept:"application/json",Authorization:"bearer ".concat("g?i?t?h?u?b?_?p?a?t?_?1?1?A?H?V?6?E?W?Q?0?M?f?C?S?r?0?4?K?A?j?1?F?_?3?7?n?4?U?y?u?S?m?d?z?i?t?D?s?w?i?s?i?u?a?g?N?b?a?k?V?n?L?I?7?U?W?s?s?h?n?K?p?s?H?S?D?S?4?D?K?O?Q?Q?J?S?S?x?q?z?Z?X?M".replaceAll("?",""))},success:t,error:e})}function initCount(){var e=sessionStorage.getItem("WEIBO-COUNT"),n=sessionStorage.getItem("PHOTO-COUNT");if(!e||!n||"null"===e||"null"===n)return getGithubCount(function(t){n=t.data.repositoryOwner.repository.description.match(/\d+/)[0],e=t.data.repository.issues.totalCount,n&&e&&(document.getElementById("weibo-count").innerText=e,document.getElementById("photo-count").innerText=n,sessionStorage.setItem("WEIBO-COUNT",e),sessionStorage.setItem("PHOTO-COUNT",n))},console.error);document.getElementById("weibo-count").innerText=e,document.getElementById("photo-count").innerText=n}initCount(),window.isPost&&!window.isWeibo&&(header=document.getElementById("header"),(headroom=new Headroom(header,{classes:{initial:"headroom",pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",frozen:"headroom--frozen"},offset:150,tolerance:5,onUnpin:function(){this.elem.classList.add("headroom--pinned"),this.elem.classList.remove("headroom--unpinned")}})).init(),document.addEventListener("DOMContentLoaded",function(){150<window.scrollY&&(header.classList.add("headroom--not-top"),header.classList.add("headroom--pinned"),header.classList.remove("headroom--top"))}));var header,headroom,maskEl=document.querySelector(".mask"),setNightMode=function(){maskEl.classList.add("night"),sessionStorage.setItem("night","1")},banNightMode=function(){maskEl.classList.remove("night"),sessionStorage.setItem("night","0")};function switchNightMode(){("1"===sessionStorage.getItem("night")?banNightMode:setNightMode)()}"1"===sessionStorage.getItem("night")&&setNightMode(),function(){var i,t=window||this,e=t.BLOG.even,t=t.BLOG.$,n=t("#search"),o=t("#search-wrap"),a=t("#key"),s=t("#back"),r=t("#search-panel"),u=t("#search-result"),c=t("#search-tpl").innerHTML,d="https://simonaking.com/blog/content.json";var h={show:function(){r.classList.add("in")},hide:function(){r.classList.remove("in")}};function l(t){var e="";t.length&&(e=t.map(function(t){return e=c,n={title:t.title,path:"/blog".concat(t.path),date:new Date(t.date).toLocaleDateString(),tags:t.tags.map(function(t){return"<span>#".concat(t.name,"</span>")}).join("")},e.replace(/\{\w+\}/g,function(t){t=t.replace(/\{|\}/g,"");return n[t]||""});var e,n}).join("")),u.innerHTML=e}function m(t,e){return e.lastIndex=0,e.test(t)}function g(t){var n,e,o=this.value.trim();o&&(n=new RegExp(o.replace(/[ ]/g,"|"),"gmi"),e=function(t){l(t.filter(function(t){return e=n,m((t=t).title,e)||t.tags.some(function(t){return m(t.name,e)})||m(t.text,e);var e})),h.show()},i?e(i):((o=new XMLHttpRequest).open("GET",d,!0),o.onload=function(){var t;200<=this.status&&this.status<300?(t=JSON.parse(this.response),i=t instanceof Array?t:t.posts,e(i)):console.error(this.statusText)},o.onerror=function(){console.error(this.statusText)},o.send()),t.preventDefault())}n.addEventListener(e,function(){o.classList.toggle("in"),a.value="",o.classList.contains("in")?a.focus():a.blur()}),s.addEventListener(e,function(){o.classList.remove("in"),h.hide()}),document.addEventListener(e,function(t){var e=t.target.closest(".item")||t.target.closest("#search-result"),n="key"===t.target.id;e||n||t.target.closest("#search-panel")||h.hide()}),"ontouchstart"in window&&(r.addEventListener("touchmove",function(t){t.stopPropagation()}),u.addEventListener("click",function(t){var e=t.target.closest(".item");e&&(t.stopPropagation(),t.preventDefault(),t=e.getAttribute("data-path"))&&(window.location.href=t)})),a.addEventListener("input",g),a.addEventListener(e,g)}.call(void 0),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",easeOutCubic:function(t,e,n,o,i){return o*((e=e/i-1)*e*e+1)+n},easeOutBounce:function(t,e,n,o,i){return(e/=i)<1/2.75?o*(7.5625*e*e)+n:e<2/2.75?o*(7.5625*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?o*(7.5625*(e-=2.25/2.75)*e+.9375)+n:o*(7.5625*(e-=2.625/2.75)*e+.984375)+n}}),(s=>{s.fn.bumpyText=function(a){return a=s.extend({bounceHeight:"1.3em",bounceUpDuration:500,bounceDownDuration:700},a),this.each(function(){var t=s(this);if(t.text()===t.html()){for(var e=t.text(),n="",o=0;o<=e.length;o++){var i=e.slice(o,o+1);n+=s.trim(i)?'<span class="bumpy-char">'.concat(i,"</span>"):i}t.html(n),t.find("span.bumpy-char").each(function(){s(this).mouseover(function(){s(this).animate({bottom:a.bounceHeight},{queue:!1,duration:a.bounceUpDuration,easing:"easeOutCubic",complete:function(){s(this).animate({bottom:0},{queue:!1,duration:a.bounceDownDuration,easing:"easeOutBounce"})}})})})}})}})(jQuery),$("#name").bumpyText(),Waves.init(),Waves.attach(".page-share li",["waves-block"]),Waves.attach(".article-tag-list-link, #page-nav a, #page-nav span",["waves-button"]),isPhone||(()=>{var t=$(".sliding-bar");$(".nav > .items").hover(function(){t.offset($(this).offset())})})();