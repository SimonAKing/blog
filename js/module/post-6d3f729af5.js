isPhone||$(".post-toc-link").click(function(){return $("html, body").animate({scrollTop:"".concat($($(this).attr("href")).offset().top,"px")},600),!1}),(()=>{function e(t){this.$img=t.querySelector("img"),this.margin=window.isPhone?10:40,this.title=this.$img.title||this.$img.alt||"",this.isZoom=!1,this.createOverlay=function(){var t=this,e=(this.$overlay=document.createElement("div"),this.$overlay.className="lightbox-overlay",this.$overlay.style.cssText="\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tbackground-color: rgba(0, 0, 0, 0.8);\n\t\t\t\tz-index: 9998;\n\t\t\t\topacity: 0;\n\t\t\t\ttransition: opacity 0.3s ease;\n\t\t\t\tcursor: zoom-out;\n\t\t\t",document.body.appendChild(this.$overlay),this);this.$overlay.addEventListener("click",function(){e.zoomOut()}),setTimeout(function(){t.$overlay.style.opacity="1"},10)},this.calcRect=function(){a=window.innerWidth||document.documentElement.clientWidth;var t=(window.innerHeight||document.documentElement.clientHeight)-2*this.margin,e=a-2*this.margin,n=o,i=s,e=Math.min(e<n?e/n:1,t<i?t/i:1);return{w:Math.round(n*e),h:Math.round(i*e)}},this.setImgRect=function(t,e){e.style.cssText="\n\t\t\t\tposition: fixed;\n\t\t\t\twidth: ".concat(t.w,"px;\n\t\t\t\theight: ").concat(t.h,"px;\n\t\t\t\ttop: 50%;\n\t\t\t\tleft: 50%;\n\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\tz-index: 9999;\n\t\t\t\ttransition: all 0.3s ease;\n\t\t\t\tcursor: zoom-out;\n\t\t\t\tobject-fit: contain;\n\t\t\t\tmax-width: none;\n\t\t\t")},this.addTitle=function(){this.title&&(this.$caption=document.createElement("div"),this.$caption.innerHTML=this.title,this.$caption.style.cssText="\n\t\t\t\tposition: fixed;\n\t\t\t\tbottom: 20px;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\ttext-align: center;\n\t\t\t\tcolor: white;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tz-index: 10000;\n\t\t\t",document.body.appendChild(this.$caption))},this.removeTitle=function(){this.$caption&&this.$caption.parentNode&&(this.$caption.parentNode.removeChild(this.$caption),this.$caption=null)},this.zoomIn=function(){var e=this;this.isZoom||(o=this.$img.naturalWidth||this.$img.width,s=this.$img.naturalHeight||this.$img.height,n=this.$img.getBoundingClientRect(),this.createOverlay(),this.$clonedImg=this.$img.cloneNode(!0),document.body.appendChild(this.$clonedImg),this.$clonedImg.style.cssText="\n\t\t\t\tposition: fixed;\n\t\t\t\twidth: ".concat(n.width,"px;\n\t\t\t\theight: ").concat(n.height,"px;\n\t\t\t\ttop: ").concat(n.top,"px;\n\t\t\t\tleft: ").concat(n.left,"px;\n\t\t\t\tz-index: 9999;\n\t\t\t\ttransition: all 0.3s ease;\n\t\t\t"),this.addTitle(),setTimeout(function(){var t=e.calcRect();e.setImgRect(t,e.$clonedImg),e.isZoom=!0,e.$clonedImg.addEventListener("click",function(){e.zoomOut()})},10))},this.zoomOut=function(){var t,e=this;this.isZoom&&(this.isZoom=!1,this.$clonedImg)&&(t=this.$img.getBoundingClientRect(),this.$clonedImg.style.cssText="\n\t\t\t\t\tposition: fixed;\n\t\t\t\t\twidth: ".concat(t.width,"px;\n\t\t\t\t\theight: ").concat(t.height,"px;\n\t\t\t\t\ttop: ").concat(t.top,"px;\n\t\t\t\t\tleft: ").concat(t.left,"px;\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\ttransition: all 0.3s ease;\n\t\t\t\t"),this.$overlay&&(this.$overlay.style.opacity="0"),this.removeTitle(),setTimeout(function(){e.$clonedImg&&e.$clonedImg.parentNode&&(e.$clonedImg.parentNode.removeChild(e.$clonedImg),e.$clonedImg=null),e.$overlay&&e.$overlay.parentNode&&(e.$overlay.parentNode.removeChild(e.$overlay),e.$overlay=null)},300))};var o,s,n,a,e=this;t.addEventListener("click",function(t){"IMG"!==t.target.tagName||e.isZoom||(t.preventDefault(),e.zoomIn())}),document.addEventListener("keydown",function(t){e.isZoom&&"Escape"===t.key&&e.zoomOut()}),window.addEventListener("scroll",throttle(function(){e.isZoom&&e.zoomOut()},150)),window.addEventListener("resize",function(){var t;e.isZoom&&e.$clonedImg&&(t=e.calcRect(),e.setImgRect(t,e.$clonedImg))})}Array.prototype.forEach.call(document.querySelectorAll(".img-lightbox"),function(t){new e(t)})})(),isReward;var isElementInViewport,loadImage,processImages,hadLoadSymbol,images=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));images&&images.length&&(isElementInViewport=function(t){var t=t.getBoundingClientRect(),e=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,i=t.top<=e&&0<=t.top+t.height,o=t.left<=n&&0<=t.left+t.width;return i&&o||0<=t.left&&0<=t.top&&t.left+t.width<=n&&t.top+t.height<=e},loadImage=function(t,e){var n=new Image,i=t.dataset.original||"https://cdn.jsdelivr.net/gh/SimonAKing/images/404.png";n.src=i,n.onload=function(){t.src=i,hadLoadSymbol[e]=!0},n.onerror=function(){t.src="https://cdn.jsdelivr.net/gh/SimonAKing/images/404.png",hadLoadSymbol[e]=!0}},processImages=function(){for(var t=0;t<images.length;++t)!hadLoadSymbol[t]&&isElementInViewport(images[t])&&loadImage(images[t],t)},hadLoadSymbol=Array.from({length:images.length}),processImages(),window.addEventListener("scroll",throttle(processImages,300),!1));