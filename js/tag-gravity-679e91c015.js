document.addEventListener("DOMContentLoaded",function(){if(document.querySelector(".tags-header"))try{setTimeout(function(){var c,i,r,a,s,o,n,l,t=Matter.Engine,e=Matter.Render,d=Matter.Runner,f=Matter.Bodies,u=Matter.Mouse,h=Matter.MouseConstraint,p=Matter.World,g=Matter.Query,y=document.querySelector(".physics-container"),v=t.create({gravity:{x:0,y:1}}),w=e.create({element:y,engine:v,options:{width:y.offsetWidth,height:y.offsetHeight,wireframes:!1,background:"transparent",pixelRatio:window.devicePixelRatio||1}}),x=u.create(w.canvas),t=(x.pixelRatio=window.devicePixelRatio||1,h.create(v,{mouse:x,constraint:{stiffness:.3,render:{visible:!1}}})),m=[f.rectangle(y.offsetWidth/2,y.offsetHeight+50,y.offsetWidth,100,{isStatic:!0,render:{fillStyle:"transparent"}}),f.rectangle(-50,y.offsetHeight/2,100,y.offsetHeight,{isStatic:!0,render:{fillStyle:"transparent"}}),f.rectangle(y.offsetWidth+50,y.offsetHeight/2,100,y.offsetHeight,{isStatic:!0,render:{fillStyle:"transparent"}})],u=(p.add(v.world,m),p.add(v.world,t),Array.from(y.querySelectorAll(".tag-link")));0===u.length?console.error("No tag links found"):(c=[],u.forEach(function(e,t){try{e.style.position="absolute",e.style.margin="0",e.style.transform="none",e.style.pointerEvents="none",e.style.zIndex="10";var o=e.querySelector(".card-card"),n=(o&&(o.style.animation="none",o.style.margin="0",o.style.display="block",o.addEventListener("click",function(t){t.stopPropagation();t=e.getAttribute("data-href");if(t)return console.log("Direct navigation to:",t),window.location.href=t,!1}),o.addEventListener("touchend",function(t){t.stopPropagation();t=e.getAttribute("data-href");if(t)return console.log("Direct touch navigation to:",t),window.location.href=t,!1})),e.offsetWidth||180),i=e.offsetHeight||40,r=Math.random()*(y.offsetWidth-n)+n/2,a=100*Math.random()-200-30*t,s=f.rectangle(r,a,n,i,{restitution:.2,friction:.3,frictionAir:.02,chamfer:{radius:15},mass:2,render:{fillStyle:"transparent",strokeStyle:"transparent",lineWidth:0}});c.push({body:s,element:e}),p.add(v.world,s)}catch(t){console.error("Error creating tag body",t)}}),i=!1,s=!(a={x:r=0,y:0}),y.style.cursor="default",w.canvas.addEventListener("mousedown",function(t){var e=w.canvas.getBoundingClientRect(),e=(x.position.x=t.clientX-e.left,x.position.y=t.clientY-e.top,i=!0,r=Date.now(),a={x:x.position.x,y:x.position.y},0<g.point(v.world.bodies,x.position).length);y.style.cursor=e?"grabbing":"default",t.preventDefault()}),w.canvas.addEventListener("mousemove",function(t){var e=w.canvas.getBoundingClientRect(),e=(x.position.x=t.clientX-e.left,x.position.y=t.clientY-e.top,i&&(5<Math.sqrt(Math.pow(x.position.x-a.x,2)+Math.pow(x.position.y-a.y,2))&&(s=!0),t.preventDefault()),0<g.point(v.world.bodies,x.position).length);i||(y.style.cursor=e?"grab":"default")}),w.canvas.addEventListener("mouseup",function(t){var e=w.canvas.getBoundingClientRect();x.position.x=t.clientX-e.left,x.position.y=t.clientY-e.top;var o,t=x.position.x,e=x.position.y,t=Math.sqrt(Math.pow(t-a.x,2)+Math.pow(e-a.y,2)),e=Date.now()-r,e=(!s&&t<5&&e<300&&0<(t=g.point(v.world.bodies,x.position)).length&&0<(o=t.filter(function(t){return!t.isStatic})).length&&(e=c.find(function(t){return t.body===o[0]}))&&(t=e.element.getAttribute("data-href"))&&(console.log("Navigation to:",t),window.location.href=t),s=i=!1,0<g.point(v.world.bodies,x.position).length);y.style.cursor=e?"grab":"default"}),w.canvas.addEventListener("touchstart",function(t){var e,o;0<t.touches.length&&(e=t.touches[0],o=w.canvas.getBoundingClientRect(),x.position.x=e.clientX-o.left,x.position.y=e.clientY-o.top,i=!0,r=Date.now(),a={x:x.position.x,y:x.position.y}),t.preventDefault()},{passive:!1}),w.canvas.addEventListener("touchmove",function(t){var e,o;0<t.touches.length&&(e=t.touches[0],o=w.canvas.getBoundingClientRect(),x.position.x=e.clientX-o.left,x.position.y=e.clientY-o.top,i)&&10<Math.sqrt(Math.pow(x.position.x-a.x,2)+Math.pow(x.position.y-a.y,2))&&(s=!0),t.preventDefault()},{passive:!1}),w.canvas.addEventListener("touchend",function(t){var e,o=x.position.x,n=x.position.y,o=Math.sqrt(Math.pow(o-a.x,2)+Math.pow(n-a.y,2)),n=Date.now()-r,o=!s&&o<15&&n<300;o&&0<(n=g.point(v.world.bodies,x.position)).length&&0<(e=n.filter(function(t){return!t.isStatic})).length&&(n=c.find(function(t){return t.body===e[0]}))&&(n=n.element.getAttribute("data-href"))&&(console.log("Navigation to:",n),window.location.href=n),s=i=!1,o&&t.preventDefault()},{passive:!1}),d.run(v),e.run(w),function t(){c.forEach(function(t){var e=t.body,t=t.element;try{var o=e.position,n=o.x,i=o.y,r=e.angle*(180/Math.PI);t.style.transform="translate(".concat(n-t.offsetWidth/2,"px, ").concat(i-t.offsetHeight/2,"px) rotate(").concat(r,"deg)")}catch(t){console.error("Error updating element position",t)}}),requestAnimationFrame(t)}(),window.addEventListener("resize",(o=function(){try{w.options.width=y.offsetWidth,w.options.height=y.offsetHeight,w.canvas.width=y.offsetWidth,w.canvas.height=y.offsetHeight,m[0].position.x=y.offsetWidth/2,m[2].position.x=y.offsetWidth+50,e.setPixelRatio(w,window.devicePixelRatio||1),x.pixelRatio=window.devicePixelRatio||1}catch(t){console.error("Error during resize",t)}},n=250,function(){var t=this,e=arguments;clearTimeout(l),l=setTimeout(function(){return o.apply(t,e)},n)})))},100)}catch(t){console.error("Error initializing physics",t)}});