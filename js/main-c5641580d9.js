window.isMenuOpen=!1,window.BLOG={},window.windowHeight=$(window).height();var hiddenProperty="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,visibilityChangeEvent=hiddenProperty.replace(/hidden/i,"visibilitychange"),throttle=function(n,o,i){function s(){r=!1===i.leading?0:(new Date).getTime(),l=null,c=n.apply(d,a),l||(d=a=null)}var d,a,c,l=null,r=0;i=i||{};return function(){var e=(new Date).getTime(),t=(r||!1!==i.leading||(r=e),o-(e-r));return d=this,a=arguments,t<=0||o<t?(l&&(clearTimeout(l),l=null),r=e,c=n.apply(d,a),l||(d=a=null)):l||!1===i.trailing||(l=setTimeout(s,t)),c}};Object.defineProperty(window,"_scrollTop",{get:function(){return document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop},set:function(e){document.documentElement.scrollTop=e,window.pageYOffset=e,document.body.scrollTop=e}}),((t,e)=>{function n(){}function o(e){var t=e.offsetLeft,n=e.offsetTop;return e.offsetParent&&(t+=(e=o(e.offsetParent)).x,n+=e.y),{x:t,y:n}}var i,s,d,a,c,l=e.querySelector.bind(e),r=e.querySelectorAll.bind(e),h=(l("html"),l("#gotop")),u=l("#menu"),f=l("#main"),v=l("#header"),g=l("#mask"),w=l("#menu-toggle"),L=l(".header-title"),m=Array.prototype.forEach,p=(/micromessenger/i.test(navigator.userAgent),t.even="ontouchstart"in t&&isPhone?"touchstart":"click",{toggleGotop:function(e){e>t.innerHeight/2?h.classList.add("in"):h.classList.remove("in")},toggleMenu:function(e){e?(isMenuOpen=!0,u.classList.remove("hide"),isPhone&&(g.classList.add("in"),u.classList.add("show"))):(g.classList.remove("in"),u.classList.remove("show"))},fixedHeader:function(e){e>v.clientHeight?v.classList.add("fixed"):v.classList.remove("fixed")},toc:isPost?(s=l("#post-toc"),d=l(".post-header").clientHeight,a=v.clientHeight,c=l("#post-content").querySelectorAll("h1, h2, h3, h4, h5, h6"),s.querySelector('a[href="#'.concat(c[0].id,'"]')).parentNode.classList.add("active"),f.classList.add("show"),L.classList.add("toc"),{fixed:function(e){d-a<=e?s.classList.add("fixed"):s.classList.remove("fixed")},actived:function(e){for(var t=0,n=c.length;t<n;t++)e>o(c[t]).y-a-5&&(s.querySelector("li.active").classList.remove("active"),s.querySelector('a[href="#'.concat(c[t].id,'"]')).parentNode.classList.add("active"));e<o(c[0]).y&&(s.querySelector("li.active").classList.remove("active"),s.querySelector('a[href="#'.concat(c[0].id,'"]')).parentNode.classList.add("active"))}}):void(isPhone&&L.classList.add("toc")),hideOnMask:[],modal:function(e){this.$modal=l(e),this.$off=this.$modal.querySelector(".close");var t=this;this.show=function(){g.classList.add("in"),isPhone||(f.classList.add("Mask"),u.classList.add("Mask")),t.$modal.classList.add("ready"),setTimeout(function(){t.$modal.classList.add("in")},10)},this.onHide=n,this.hide=function(){t.onHide();var e=!!l("div.page-modal.reward-lay.ready.in");isPhone&&!e||g.classList.remove("in"),isPhone||(f.classList.remove("Mask"),u.classList.remove("Mask")),t.$modal.classList.remove("in"),setTimeout(function(){t.$modal.classList.remove("ready")},300)},this.toggle=function(){return t.$modal.classList.contains("in")?t.hide():t.show()},p.hideOnMask.push(this.hide),this.$off&&this.$off.addEventListener(even,this.hide)},share:function(){var t=l("#pageShare"),n=l("#shareFab");n&&(n.addEventListener(even,function(){t.classList.toggle("in")},!1),e.addEventListener(even,function(e){n.contains(e.target)||t.classList.remove("in")},!1))},colorpicker:function(){new iro.ColorPicker("#color-picker-container",{width:200,color:"#7af",borderWidth:6,borderColor:"#ccc"}).on("color:change",function(e){selectedColor=e.hexString,changeColor(selectedColor),window.BLOG&&"function"==typeof window.BLOG.onThemeColorChange&&window.BLOG.onThemeColorChange(selectedColor),window.BLOG&&"function"==typeof window.BLOG.onThemeColorChange2&&window.BLOG.onThemeColorChange2(selectedColor)});var e=new this.modal("#color-picker");l("#color-picker-icon").addEventListener(even,function(){e.toggle()})},wechat:function(){var e=new this.modal("#wechat");l("#link-wechat").addEventListener(even,function(){e.toggle()})},post:function(){p.share()},scroll:function(){isPost&&!isPhone&&(h&&p.toggleGotop(_scrollTop),p.toc.fixed(_scrollTop),p.toc.actived(_scrollTop),isMenuOpen)&&(u.classList.add("hide"),isMenuOpen=!1)},page:(i=r(".fade, .fade-scale"),{loaded:function(){document[hiddenProperty]||p.page.visible||(p.scroll(),m.call(i,function(e){e.classList.add("in")}),p.page.visible=!0)},unload:function(){},visible:!1})});t.addEventListener("DOMContentLoaded",function(){p.page.loaded()}),t.addEventListener("load",function(){p.wechat(),p.colorpicker(),isPost&&setTimeout(p.post,0),window.spotlight&&window.spotlight.init()}),t.addEventListener("beforeunload",p.page.unload),t.addEventListener(visibilityChangeEvent,p.page.loaded),t.addEventListener("resize",throttle(function(){window.isPhone=/Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent)||window.innerWidth<1300,even="ontouchstart"in t?"touchstart":"click",t.BLOG.even=even,p.toggleMenu()},150)),h&&h.addEventListener(even,function(){window.scrollTo(0,0)},!1),w.addEventListener(even,function(e){p.toggleMenu(!0)},!1),g.addEventListener(even,function(e){p.toggleMenu(),p.hideOnMask.forEach(function(e){e()})},!1),t.addEventListener("scroll",throttle(p.scroll,150),!1),p.noop=n,p.even=even,p.$=l,p.$$=r,Object.keys(p).reduce(function(e,t){return e[t]=p[t],e},t.BLOG)})(window,document);