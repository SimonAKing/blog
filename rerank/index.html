<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=2,viewport-fit=cover"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><meta name="author" content="SimonAKing"><link rel="icon" type="image/x-icon" href="https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/favicon.ico"><link rel="shortcut icon" type="image/x-icon" href="https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/favicon.ico"><link rel="apple-touch-icon" href="https://cdn.jsdelivr.net/gh/SimonAKing/images/PWA/apple-touch-icon.png"><title>èŠèŠ Rerankï¼šä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/font/comic.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-roboto@1.1.13/index.min.css"><link id="style" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/css/style-eaf373873c.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/css/post-04c1b3d7ed.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/css/module/relatedPosts-1fcaaf0adb.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/css/module/comment-2c4172461a.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/firacode@5.2.0/distr/fira_code.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/css/highlight-d6d2f7ba38.css"><meta name="theme-color"><meta name="apple-mobile-web-app-status-bar-style"><meta name="msapplication-navbutton-color"><script>
	window.selectedColor = ''
	window.themeColor = localStorage.getItem("theme-color") || "#5275b0"
	window.changeColor = function(themeColor){
		document.documentElement.style.setProperty('--theme-color', themeColor);
		document.querySelector("meta[name=theme-color]").setAttribute("content", themeColor);
		document.querySelector("meta[name=apple-mobile-web-app-status-bar-style]").setAttribute("content", themeColor);
		document.querySelector("meta[name=msapplication-navbutton-color]").setAttribute("content", themeColor);
		localStorage.setItem('theme-color', themeColor)
	}
	changeColor(themeColor)

	window.isPhone = /Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent) || (window.innerWidth < 1300)
	window.isHome = false
	window.isPost = true
	if(window.isPost){
		window.isReward = true
		window.isWeibo = false
	}
</script><link rel="manifest" href="https://simonaking.com/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="mobile-web-app-title" content="SimonAKing"><meta name="msapplication-starturl" content="https://simonaking.com"><meta name="application-name" content="SimonAKing"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SimonAKing"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="prefetch" href="https://cdn.jsdelivr.net/"><link rel="dns-prefetch" href="https://api.github.com/"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-109696496-3"></script><script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-109696496-3');
</script><link rel="canonical" href="https://simonaking.com/blog/rerank/"><link rel="alternate" type="application/atom+xml" title="SimonAKing" href="/blog/atom.xml"><meta property="og:title" content="èŠèŠ Rerankï¼šä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹ | SimonAKing"><meta property="og:site_name" content="SimonAKing"><meta property="og:type" content="article"><meta property="og:url" content="https://simonaking.com/blog/rerank/"><meta property="og:locale" content="zh-CN"><meta name="description" content="åœ¨ NLP åœºæ™¯ä¸­ï¼ŒRerank ä½œä¸ºä¸€ä¸ªå…³é”®ç¯èŠ‚ï¼Œæ‰¿æ‹…ç€å¯¹å¤šè·¯å¬å›ã€å¤šæ•°æ®æ¥æºã€å¤šæ¨¡æ€ã€å¤šç»“æ„ç­‰ä¸åŒç±»å‹æ•°æ®çš„å½’ä¸€åŒ–å’Œç²¾ç­›ä½œç”¨ã€‚å®ƒèƒ½æœ‰æ•ˆåœ°æ•´åˆå’Œä¼˜åŒ–å„ç±»å¬å›ç»“æœï¼Œå¯¹æå‡æ£€ç´¢ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½è‡³å…³é‡è¦ã€‚ - SimonAKing - SimonAKing"><meta name="keywords" content="Rerank,BERT,LLM,å¤§æ¨¡å‹,LLM,Rerank,SimonAKing,Blog,åšå®¢"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/overall.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/timeline.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/badcase.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/Influence.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p1.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p2.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p3.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p4.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p5.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p6.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p7.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p8.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p9.png"><meta property="article:published_time" content="2024-12-09T10:40:53.000Z"><meta property="article:modified_time" content="2025-05-02T08:30:48.354Z"><meta property="og:updated_time" content="2025-05-02T08:30:48.354Z"><meta property="article:author" content="SimonAKing"><meta property="article:tag" content="Rerank,BERT,LLM,å¤§æ¨¡å‹,LLM,Rerank,SimonAKing,Blog,åšå®¢"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="https:&#x2F;&#x2F;simonaking.com&#x2F;blog&#x2F;rerank&#x2F;"><meta name="twitter:creator" content="SimonAKing"><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "url": "https://simonaking.com/blog/rerank/",
    "@type": "BlogPosting",
    "logo": "https://simonaking.com/images/PWA/192.png",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://simonaking.com/blog/rerank/"
    },
    "headline": "èŠèŠ Rerankï¼šä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹ | SimonAKing",
    "image": {
        "@type": "ImageObject",
        "url": "https://simonaking.com/images/PWA/192.png"
    },
    "datePublished": "2024-12-09T10:40:53.000Z",
    "dateModified": "2025-05-02T08:30:48.354Z",
    "author": {
        "@type": "Person",
        "name": "SimonAKing",
        "image": {
            "@type": "ImageObject",
            "url": "https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/avatar.jpg"
        },
        "description": "STDIN | Think &gt;&gt; /dev/Mind"
    },
    "publisher": {
        "@type": "Organization",
        "name": "SimonAKing",
        "logo": {
            "@type": "ImageObject",
            "url": "https://simonaking.com/images/PWA/192.png"
        }
    },
    "keywords": "Rerank,BERT,LLM,å¤§æ¨¡å‹,LLM,Rerank,SimonAKing,Blog,åšå®¢",
    "description": "åœ¨ NLP åœºæ™¯ä¸­ï¼ŒRerank ä½œä¸ºä¸€ä¸ªå…³é”®ç¯èŠ‚ï¼Œæ‰¿æ‹…ç€å¯¹å¤šè·¯å¬å›ã€å¤šæ•°æ®æ¥æºã€å¤šæ¨¡æ€ã€å¤šç»“æ„ç­‰ä¸åŒç±»å‹æ•°æ®çš„å½’ä¸€åŒ–å’Œç²¾ç­›ä½œç”¨ã€‚å®ƒèƒ½æœ‰æ•ˆåœ°æ•´åˆå’Œä¼˜åŒ–å„ç±»å¬å›ç»“æœï¼Œå¯¹æå‡æ£€ç´¢ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½è‡³å…³é‡è¦ã€‚ - SimonAKing - SimonAKing"
}
</script><!--[if lt IE 9]><style> .alert { padding: 15px; margin-bottom: 20px; border: 1px solid transparent; border-radius: 4px } .alert-danger { background-color: #f2dede; border-color: #ebccd1; color: #a94442; border-bottom: 1px solid #ebccd1 } .alert-link { color: #843534; font-weight: bold } .topframe { margin: 0; padding-left: 15px; padding-right: 15px; text-align: center; border-radius: 0; position: fixed; left: 0; right: 0; top: 0; z-index: 1000 } </style><div class="alert alert-danger topframe"> ä½ çš„æµè§ˆå™¨å®åœ¨<strong>å¤ªå¤ªå¤ªå¤ªå¤ªå¤ªæ—§äº†</strong>ï¼Œæ”¾å­¦åˆ«èµ°ï¼Œå‡çº§å®Œæµè§ˆå™¨å†è¯´ï¼ <a target="_blank" class="alert-link" href="//browsehappy.com">ç«‹å³å‡çº§</a></div><script src="https://cdn.bootcss.com/html5shiv/r29/html5.min.js"></script><script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script><![endif]--></head><body itemscope itemtype="http://schema.org/WebPage"><aside id="menu" class="hide"><div class="inner flex-row-vertical"><div class="brand-wrap" itemprop="author" itemscope itemtype="http://schema.org/Person"><div class="brand fade"> <a class="avatar waves-effect waves-circle waves-light"><img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/avatar.jpg" title="avatar" alt="avatar" itemprop="image"></a><div class="introduce"><h5 class="nickname " id="name">SimonAKing</h5><div class="links-of-author fade"><span class="links-of-author-item" id="link-wechat"><a href="javascript:void(0)" rel="noopener noreferrer" title="Wechat"><i class="icon icon-lg icon-wechat"></i></a></span><span class="links-of-author-item"><a href="mailto:hi@simonaking.com" rel="noopener noreferrer" target="_blank" title="Email"><i class="icon icon-lg icon-email"></i></a></span><span class="links-of-author-item"><a href="https://x.com/simon_aking" rel="external nofollow noopener noreferrer" target="_blank" title="X"><i class="icon icon-lg icon-XTwitter"></i></a></span><span class="links-of-author-item"><a href="https://github.com/SimonAKing" rel="external nofollow noopener noreferrer" target="_blank" title="Github"><i class="icon icon-lg icon-github"></i></a></span></div><div class="statistics"><ul><li><a class="total-link" href="/blog/weibo/"><div class="count" id="weibo-count">âˆ</div><div class="type">å¾®åš</div></a></li><li><a class="total-link" href="/blog/archives/"><div class="count">32</div><div class="type">æ–‡ç« </div></a></li><li><a class="total-link" href="/gallery/"><div class="count" id="photo-count">âˆ</div><div class="type">ç›¸å†Œ</div></a></li></ul></div></div></div></div><div class="scroll-wrap flex-col"><ul class="nav fade"><li class="items waves-block waves-effect"><a href="/blog/"><i class="icon icon-lg icon-xiazai45"></i> <span style="font-size:1em">ä¸» é¡µ</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="/blog/archives/"><i class="icon icon-lg icon-guidangxiangmu"></i> <span style="font-size:1em">å½’ æ¡£</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="/blog/tags/"><i class="icon icon-lg icon-biaoqian"></i> <span style="font-size:1em">æ ‡ ç­¾</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="/blog/weibo/"><i class="icon icon-lg icon-biaoqing"></i> <span style="font-size:1em">å¾® åš</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="//simonaking.com/gallery/"><i class="icon icon-lg icon-xiangce"></i> <span style="font-size:1em">ç›¸ å†Œ</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="//simonaking.com/about/"><i class="icon icon-lg icon-zhifeiji"></i> <span style="font-size:1em">å…³ äº</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="//simonaking.com/projects/"><i class="icon icon-lg icon-projects"></i> <span style="font-size:1em">é¡¹ ç›®</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="//thinking.simonaking.com/" target="_blank" rel="noopener"><i class="icon icon-lg icon--Idea"></i> <span style="font-size:1em">æ€ è€ƒ</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><li class="items waves-block waves-effect"><a href="//simonaking.com"><i class="icon icon-lg icon-icon--"></i> <span style="font-size:1em">å¯¼èˆª</span><i class="icon icon-lg icon-chevronleft custom-caret-left"></i></a></li><div class="sliding-bar"></div></ul><div class="nav-tool"><a class="nav-tool-item exchange" data-title="ç®€ç¹äº’æ¢" href="javascript:translatePage();"><i class="fade icon icon-lg icon-zhuanhuan custom-exchange"></i></a><a class="nav-tool-item picker" data-title="è°ƒè‰²æ¿" id="color-picker-icon"><i class="fade icon icon-lg icon-color-palette-outlin custom-picker"></i></a><a class="nav-tool-item light" data-title="å…³ç¯" href="javascript:switchNightMode();"><i class="fade icon icon-lg icon-lightbulbo custom-lightbulb"></i></a></div></div></div></aside><main id="main" class="in_post"><header class="top-header in_post" id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="flex-row"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"><i class="icon icon-lg icon-naviconround"></i></a><div class="flex-col"></div><div class="search-wrap" id="search-wrap"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="icon icon-lg icon-chevronleft"></i></a> <input type="text" id="key" aria-label="search" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—"><a href="javascript:;" title="æœç´¢" class="header-icon waves-effect waves-circle waves-light" id="search"><i class="icon icon-lg icon-search"></i></a></div></div><div class="header-title ellipsis">èŠèŠ Rerankï¼šä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹</div></header><header class="content-header post-header"><canvas class="flickering-grid-canvas"></canvas></header><div class="container body-wrap"><aside class="post-widget"><nav class="post-toc-wrap fade" id="post-toc"><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å‰è¨€"><span class="post-toc-number">1.</span> <span class="post-toc-text">å‰è¨€</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æ­£æ–‡"><span class="post-toc-number">2.</span> <span class="post-toc-text">æ­£æ–‡</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ä»€ä¹ˆæ˜¯-Rerank"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">ä»€ä¹ˆæ˜¯ Rerank</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ä¸šç•Œå®è·µ"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">ä¸šç•Œå®è·µ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Passage-Re-ranking-with-BERT"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">Passage Re-ranking with BERT</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Document-Ranking-with-a-Pretrained-Sequence-to-Sequence-Model"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">Document Ranking with a Pretrained Sequence-to-Sequence Model</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Is-ChatGPT-Good-at-Search-Investigating-Large-Language-Models-as-Re-Ranking-Agents"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">Is ChatGPT Good at Search? Investigating Large Language Models as Re-Ranking Agents</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Large-Language-Models-are-Effective-Text-Rankers"><span class="post-toc-number">2.2.4.</span> <span class="post-toc-text">Large Language Models are Effective Text Rankers</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Leveraging-Passage-Embeddings-for-Efficient-Listwise-Reranking-with-Large-Language-Models"><span class="post-toc-number">2.2.5.</span> <span class="post-toc-text">Leveraging Passage Embeddings for Efficient Listwise Reranking with Large Language Models</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ä¸šç•Œè¿›å±•"><span class="post-toc-number">2.2.6.</span> <span class="post-toc-text">ä¸šç•Œè¿›å±•</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ç»“æŸè¯­"><span class="post-toc-number">3.</span> <span class="post-toc-text">ç»“æŸè¯­</span></a></li></ol></nav></aside><article id="post-èŠèŠ Rerank-ä»BERTåˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹" class="post-article article-type-post fade" itemscope itemtype="http://schema.org/Article"><div class="post-card"><h1 class="post-card-title" itemprop="name headline">&nbsp;</h1><script>
			window.addEventListener('DOMContentLoaded', function (){ var postTitle = document.querySelector('.post-card-title'); var typingbefore = 'èŠèŠ Rerankï¼šä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹'; var _i = 0; function typetitle() { if (_i <= typingbefore.length) { postTitle.innerHTML = `${typingbefore.slice(0, _i++)}|`; setTimeout(typetitle, 120); } else { postTitle.innerHTML = typingbefore; } } typetitle(); })
		</script><div class="post-meta"><div class="post-category-phone"><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/blog/categories/LLM/">LLM</a></li></ul></div> <time itemprop="dateCreated datePublished" class="post-time" title="2024-12-09 18:40:53" datetime="2024-12-09T10:40:53.000Z">2024-12-09</time></div><link itemprop="mainEntityOfPage" href="https://simonaking.com/blog/rerank/" style="display:none"><div class="post-content" id="post-content" itemprop="articleBody"><p>ä»æœç´¢å¼•æ“åˆ°å¤§è¯­è¨€æ¨¡å‹ï¼ŒRerank æŠ€æœ¯ä¸€ç›´åœ¨é»˜é»˜å‘æŒ¥ç€â€æœ€åä¸€å…¬é‡Œâ€çš„å…³é”®ä½œç”¨ã€‚</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ NLP åœºæ™¯ä¸­ï¼ŒRerank ä½œä¸ºä¸€ä¸ªå…³é”®ç¯èŠ‚ï¼Œæ‰¿æ‹…ç€å¯¹å¤šè·¯å¬å›ã€å¤šæ•°æ®æ¥æºã€å¤šæ¨¡æ€ã€å¤šç»“æ„ç­‰ä¸åŒç±»å‹æ•°æ®çš„å½’ä¸€åŒ–å’Œç²¾ç­›ä½œç”¨ã€‚å®ƒèƒ½æœ‰æ•ˆåœ°æ•´åˆå’Œä¼˜åŒ–å„ç±»å¬å›ç»“æœï¼Œå¯¹æå‡æ£€ç´¢ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½è‡³å…³é‡è¦ã€‚</p><p>æœ¬æ–‡å°†ä»‹ç» rerank ç›¸å…³çš„æŠ€æœ¯æ¦‚å¿µã€ä¸šç•Œè¿›å±•ï¼Œä»¥åŠå¯¹ä¸šåŠ¡ äº§ç”Ÿä»·å€¼çš„å¯èƒ½æ€§ã€‚</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/2-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/overall.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/overall.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/overall.png</div></figure><h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><h3 id="ä»€ä¹ˆæ˜¯-Rerank"><a href="#ä»€ä¹ˆæ˜¯-Rerank" class="headerlink" title="ä»€ä¹ˆæ˜¯ Rerank"></a>ä»€ä¹ˆæ˜¯ Rerank</h3><p>Rerank å¹¶ä¸æ˜¯æ–°å…´çš„æŠ€æœ¯ï¼Œå…¶å‘å±•å†å²å¯è¿½æº¯åˆ°æœç´¢å¼•æ“ï¼Œå…¶å†ç¨‹å¯æµ“ç¼©ä¸º 3 ä¸ªä¸»è¦é˜¶æ®µï¼š</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/4-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/timeline.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/timeline.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/timeline.png</div></figure><p>ä¸€å¥è¯ä»‹ç»ï¼šRerank æ˜¯ä¸€ç§å¯¹åˆæ­¥æ£€ç´¢ç»“æœè¿›è¡Œé‡æ’åºçš„ä¼˜åŒ–æŠ€æœ¯ï¼Œä»¥æé«˜é—®ç­”ç»“æœçš„å‡†ç¡®æ€§ã€‚</p><p>åœ¨ RAG åº”ç”¨ä¸­ï¼Œå¦‚æœæ²¡æœ‰ rerank ä¼šç»™åˆ°æ¨¡å‹ ç²—å¬åçš„æ–‡æ¡£ï¼Œä¼šå‡ºç°æ–‡æ¡£ä¸ query æ·±å±‚è¯­ä¹‰ç›¸å…³æ€§ä¸è¶³ï¼ˆä»…è¡¨é¢ç›¸ä¼¼ï¼‰é—®é¢˜ï¼Œå¯¼è‡´ç”Ÿæˆè´¨é‡ä¸‹é™ã€‚</p><p>ä¸€ä¸ª bad caseï¼š</p><div class="image-row"><figure class="image-bubble row-image"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/4-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/badcase.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/badcase.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/badcase.png</div></figure><figure class="image-bubble row-image"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/1-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/Influence.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/Influence.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/Influence.png</div></figure></div><p><em>ä¸ç›¸å…³æ®µè½å¯¹äº RAG æ•ˆæœçš„å½±å“ <a href="https://arxiv.org/pdf/2410.05983" target="_blank" rel="external nofollow noopener noreferrer">https://arxiv.org/pdf/2410.05983</a></em></p><p>å…·ä½“è€Œè¨€ï¼Œrerank çš„åŠ æŒä¼šå¸¦æ¥ï¼š</p><ol><li><p>æ’é™¤æ— å…³ä¿¡æ¯ï¼šRerank ä¼šè¿›ä¸€æ­¥æ·±åº¦ç†è§£è¯­ä¹‰ï¼Œä»å‘é‡çš„ç›¸ä¼¼åº¦ã€å…³é”®è¯çš„è¯é¢‘æƒé‡åˆ°ç†è§£å¤æ‚è¯­ä¹‰ï¼ˆå¦‚ cross-encoder æ¶æ„ï¼‰ï¼›</p></li><li><p>æœ‰æ›´å¤šæ’åºå¯èƒ½æ€§ï¼šèƒ½å¤Ÿå¢åŠ å¤šç»´åº¦çš„ç‰¹å¾è¿›è¡ŒåŠ æƒè®¡ç®—ï¼ˆå¦‚ æ–‡æ¡£å®Œæ•´æ€§ã€æ—¶æ•ˆæ€§ã€æƒå¨æ€§..) ;</p></li><li><p>èƒ½åŸºäºæ–‡æ¡£ä¸Šä¸‹æ–‡ã€query æ„å›¾æ’åºï¼šæ’åºåçš„æ–‡æ¡£ ä¸ä»…æ˜¯è¯­ä¹‰å…³è”ï¼Œè¿˜èƒ½æå‡å‡†ç¡®åæ˜  query çœŸå®æ„å›¾çš„æ–‡æ¡£æƒé‡ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šquery æ˜¯æŸä¸ª topic ç›¸å…³çš„é—®ç­”ï¼Œå¦‚ï¼šè‹¹æœå…¬å¸æœ€æ–°çš„äº§å“å‘å¸ƒä¼šæœ‰å“ªäº›äº®ç‚¹ï¼Ÿ</p></li></ol><p>å†ç²¾æ’åï¼Œå¯ä»¥å†è¿›ä¸€æ­¥è¿‡æ»¤ ä½ç›¸å…³çš„ documents æˆ–è€… åŸºäºæ¨¡å‹çª—å£é™åˆ¶ã€æ³¨æ„åŠ›ç¼ºé™·ï¼ˆå¦‚ lost in the middleï¼‰ï¼Œæ ¹æ® ç›¸å…³åˆ†æ•° é‡æ’ documents ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæå‡ RAG åº”ç”¨çš„é—®ç­”æ•ˆæœã€‚</p><h3 id="ä¸šç•Œå®è·µ"><a href="#ä¸šç•Œå®è·µ" class="headerlink" title="ä¸šç•Œå®è·µ"></a>ä¸šç•Œå®è·µ</h3><p>å› ä¸ºæ¶‰åŠåˆ°äº†ç²¾æ’ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿé¢å¤–çš„å»¶è¿Ÿï¼›ä¸” rerank æ¨¡å‹ä¹Ÿéœ€è¦ä¸€å®šçš„å‚æ•°é‡ï¼Œå¯¹äºé•¿å°¾åœºæ™¯å¯èƒ½ä¹Ÿä¼šæœ‰åå·®ã€‚è¿‘å¹´æ¥çš„ç ”ç©¶å·²ç»æå‡ºäº†å¤šç§åˆ›æ–°æ–¹æ³•æ¥åº”å¯¹è¿™äº›æŒ‘æˆ˜ã€‚ä»¥ä¸‹å°†ä»‹ç»ä¸€äº›å…·æœ‰ä»£è¡¨æ€§çš„è®ºæ–‡ã€‚</p><h4 id="Passage-Re-ranking-with-BERT"><a href="#Passage-Re-ranking-with-BERT" class="headerlink" title="Passage Re-ranking with BERT"></a><a href="https://arxiv.org/abs/1901.04085" target="_blank" rel="external nofollow noopener noreferrer">Passage Re-ranking with BERT</a></h4><blockquote><p>ğŸ“„ Paper: <a href="https://arxiv.org/abs/1901.04085" target="_blank" rel="external nofollow noopener noreferrer">https://arxiv.org/abs/1901.04085</a></p></blockquote><p>è¯¥å·¥ä½œå¼€åˆ›æ€§åœ°æå‡ºäº†ä¸€ç§åŸºäº BERT çš„ rerank æ¨¡å‹ï¼Œè¯æ˜äº† é¢„è®­ç»ƒæ¨¡å‹åœ¨ rerank ä»»åŠ¡çš„æ•ˆæœï¼Œä¹Ÿå½±å“äº†åç»­ç›¸å…³çš„ç ”ç©¶å·¥ä½œã€‚</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/3-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p1.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p1.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p1.png</div></figure><p>æ ¸å¿ƒæ€è·¯æ˜¯å°† rerank è§†ä¸º äºŒåˆ†ç±»ä»»åŠ¡ï¼Œå‡è®¾è¾“å…¥æ˜¯ query-document pairsï¼Œä¼šé‡‡å– point-wise æ€è·¯ï¼ˆäºŒåˆ†ç±»ï¼‰å°† query-document æ‹¼æ¥æˆå•ä¸ªåºåˆ—ï¼š[CLS] query [SEP] document [SEP]ï¼Œ[SEP] åˆ†å‰²åçš„ token ä¼šå¢åŠ  token_type_ids ä½œä¸º llm embedding çš„ä¸€éƒ¨åˆ†ï¼ˆè¾…åŠ©ä¿¡æ¯ ç”¨äºåŒºåˆ† query ä¸ documentï¼‰ã€‚</p><p>ç»è¿‡ å¤šå±‚ self-attentionï¼Œ[CLS] token èƒ½è¡¨ç¤º query ä¸ document çš„åŒ¹é…åº¦ï¼Œæœ€åé€šè¿‡ä¸€ä¸ªåˆ†ç±»å±‚é¢„æµ‹ [CLS] token è¡¨ç¤ºçš„ç›¸å…³æ€§å¾—åˆ†ã€‚</p><p>è®­ç»ƒæ—¶ï¼Œç›¸å…³çš„æ•°æ®ä½œä¸ºæ­£æ ·æœ¬ï¼Œä¸ç›¸å…³çš„æ•°æ®ä½œä¸ºè´Ÿæ ·æœ¬ï¼Œä½¿ç”¨äº¤å‰ç†µæŸå¤±è¿›è¡Œä¼˜åŒ–ã€‚</p><p>å…³é”®ä»£ç ä»‹ç»ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleBertReranker</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, bert_model_name=<span class="string">'bert-base-uncased'</span>)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.bert = BertModel.from_pretrained(bert_model_name)</span><br><span class="line">        self.classifier = nn.Linear(self.bert.config.hidden_size, <span class="number">1</span>)  <span class="comment"># åˆ†ç±»å±‚</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, input_ids, attention_mask, token_type_ids)</span>:</span></span><br><span class="line">        <span class="comment"># è·å– BERT çš„è¾“å‡º</span></span><br><span class="line">        outputs = self.bert(input_ids=input_ids,</span><br><span class="line">                            attention_mask=attention_mask,</span><br><span class="line">                            token_type_ids=token_type_ids)</span><br><span class="line">        <span class="comment"># ä½¿ç”¨ [CLS] token çš„è¡¨ç¤º</span></span><br><span class="line">        cls_output = outputs.pooler_output</span><br><span class="line">        <span class="comment"># é€šè¿‡åˆ†ç±»å±‚å¾—åˆ°ç›¸å…³æ€§å¾—åˆ†</span></span><br><span class="line">        score = self.classifier(cls_output)</span><br><span class="line">        <span class="keyword">return</span> score</span><br><span class="line"></span><br><span class="line">tokenizer = BertTokenizer.from_pretrained(<span class="string">'bert-base-uncased'</span>)</span><br><span class="line">query = <span class="string">"What is the capital of France?"</span></span><br><span class="line">document = <span class="string">"Paris is the capital of France."</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–ç è¾“å…¥</span></span><br><span class="line">inputs = tokenizer(query, document, return_tensors=<span class="string">'pt'</span>, padding=<span class="literal">True</span>, truncation=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æ¨¡å‹</span></span><br><span class="line">model = SimpleBertReranker()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—ç›¸å…³æ€§å¾—åˆ†</span></span><br><span class="line"><span class="keyword">with</span> torch.no_grad():</span><br><span class="line">    score = model(**inputs)</span><br><span class="line">    print(<span class="string">"Relevance score:"</span>, score.item())</span><br></pre></td></tr></tbody></table></figure><p></p><h4 id="Document-Ranking-with-a-Pretrained-Sequence-to-Sequence-Model"><a href="#Document-Ranking-with-a-Pretrained-Sequence-to-Sequence-Model" class="headerlink" title="Document Ranking with a Pretrained Sequence-to-Sequence Model"></a><a href="https://arxiv.org/abs/2003.06713" target="_blank" rel="external nofollow noopener noreferrer">Document Ranking with a Pretrained Sequence-to-Sequence Model</a></h4><blockquote><p>ğŸ“„ Paper: <a href="https://arxiv.org/abs/2003.06713" target="_blank" rel="external nofollow noopener noreferrer">https://arxiv.org/abs/2003.06713</a></p></blockquote><p>è¯¥å·¥ä½œæå‡ºäº†ä¸€ç§ä¸åŒäº BERT æ¨¡å‹ åˆ†ç±»ä»»åŠ¡çš„æ–¹å¼ï¼ŒåŸºäº T5 æ¨¡å‹ å°† rerank è§†ä¸ºç”Ÿæˆä»»åŠ¡ã€‚</p><div class="image-row"><figure class="image-bubble row-image"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/2-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p2.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p2.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p2.png</div></figure><figure class="image-bubble row-image"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/3-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p3.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p3.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p3.png</div></figure></div><p>è¾“å…¥åºåˆ—çš„æ ¼å¼æ˜¯ Query: q Document: d Relevant: æ ¼å¼ï¼Œè¾“å‡ºæ˜¯ trueã€false è¿™ä¸¤ç§ tokenã€‚</p><p>åœ¨è®­ç»ƒæ—¶ï¼Œæ¨¡å‹è¢«å¾®è°ƒä¸ºæ ¹æ®æ­£è´Ÿæ ·æœ¬è¾“å‡º â€œtrueâ€ æˆ– â€œfalseâ€ ä½œä¸ºç›®æ ‡ tokenï¼›åœ¨æ¨ç†é˜¶æ®µ é€šè¿‡å¯¹ç›®æ ‡ token è¿›è¡Œ softmax è®¡ç®—æ¦‚ç‡æ¥è¿›è¡Œé‡æ’ã€‚</p><p>å…³é”®ä»£ç ä»‹ç»ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">T5Reranker</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># åŠ è½½é¢„è®­ç»ƒçš„ T5 æ¨¡å‹</span></span><br><span class="line">        self.model = load_pretrained_t5()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">prepare_input</span><span class="params">(self, query, document)</span>:</span></span><br><span class="line">        <span class="comment"># æ„é€ è¾“å…¥åºåˆ—æ ¼å¼</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f"Query: <span class="subst">{query}</span> Document: <span class="subst">{document}</span> Relevant:"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fine_tune</span><span class="params">(self, train_data)</span>:</span></span><br><span class="line">        <span class="string">"""è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line"><span class="string">        train_data: [(query, document, is_relevant), ...]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">for</span> query, document, is_relevant <span class="keyword">in</span> train_data:</span><br><span class="line">            input_text = self.prepare_input(query, document)</span><br><span class="line">            target = <span class="string">"true"</span> <span class="keyword">if</span> is_relevant <span class="keyword">else</span> <span class="string">"false"</span></span><br><span class="line">            self.model.train(input_text, target)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">rerank</span><span class="params">(self, query, candidate_documents)</span>:</span></span><br><span class="line">        <span class="string">"""é‡æ’åºè¿‡ç¨‹"""</span></span><br><span class="line">        results = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> doc <span class="keyword">in</span> candidate_documents:</span><br><span class="line">            <span class="comment"># æ„é€ è¾“å…¥åºåˆ—</span></span><br><span class="line">            input_text = self.prepare_input(query, doc)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># è·å–æ¨¡å‹è¾“å‡ºçš„ logits</span></span><br><span class="line">            logits = self.model.get_logits(input_text)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># åªå¯¹"true"å’Œ"false" token è®¡ç®— softmax</span></span><br><span class="line">            true_false_logits = logits[[<span class="string">"true_token_id"</span>, <span class="string">"false_token_id"</span>]]</span><br><span class="line">            probs = softmax(true_false_logits)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># ä½¿ç”¨"true" token çš„æ¦‚ç‡ä½œä¸ºç›¸å…³æ€§åˆ†æ•°</span></span><br><span class="line">            relevance_score = probs[<span class="string">"true_token_id"</span>]</span><br><span class="line">            results.append((doc, relevance_score))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ ¹æ®ç›¸å…³æ€§åˆ†æ•°æ’åº</span></span><br><span class="line">        ranked_docs = sorted(results, key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> ranked_docs</span><br></pre></td></tr></tbody></table></figure><p></p><h4 id="Is-ChatGPT-Good-at-Search-Investigating-Large-Language-Models-as-Re-Ranking-Agents"><a href="#Is-ChatGPT-Good-at-Search-Investigating-Large-Language-Models-as-Re-Ranking-Agents" class="headerlink" title="Is ChatGPT Good at Search? Investigating Large Language Models as Re-Ranking Agents"></a><a href="https://arxiv.org/abs/2304.09542" target="_blank" rel="external nofollow noopener noreferrer">Is ChatGPT Good at Search? Investigating Large Language Models as Re-Ranking Agents</a></h4><blockquote><p>ğŸ“„ Paper: <a href="https://arxiv.org/abs/2304.09542" target="_blank" rel="external nofollow noopener noreferrer">https://arxiv.org/abs/2304.09542</a></p></blockquote><p>è¯¥å·¥ä½œè°ƒç ”äº† GPT æ¨¡å‹ï¼ˆGPT-4ï¼‰ åœ¨ rerank ä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼ŒåŸºäºå½“æ—¶çš„ sota æ¨¡å‹ï¼ˆGPT4ï¼‰å†ç»“åˆåˆé€‚çš„æ–¹æ³•ï¼ˆæ»‘åŠ¨çª—å£+ listwiseï¼‰ï¼Œå¯ä½¿å¾— GPT æ¨¡å‹è¾¾åˆ° SOTA ç»“æœã€‚</p><div class="image-row"><figure class="image-bubble row-image"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/4-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p4.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p4.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p4.png</div></figure><figure class="image-bubble row-image"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/2-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p5.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p5.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p5.png</div></figure></div><p>é€šè¿‡å›¾ c çš„ prompt è¦æ±‚ LLMs ç”Ÿæˆç›¸å…³æ€§çš„æ®µè½ IDï¼Œå¦‚æœè¶…å‡ºæ¨¡å‹çª—å£æ—¶ ä¼šä½¿ç”¨ æ»‘åŠ¨çª—å£ç­–ç•¥ï¼š</p><p>é¦–å…ˆå¯¹ï¼ˆM-wï¼‰åˆ° M çš„æ®µè½è¿›è¡Œæ’åï¼Œç„¶åæ»‘åŠ¨çª—å£ï¼Œå¯¹ï¼ˆM-w-sï¼‰åˆ°ï¼ˆM-sï¼‰çš„æ®µè½é‡æ–°æ’åï¼Œé‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°æ‰€æœ‰æ®µè½éƒ½è¢«é‡æ–°æ’åã€‚</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/3-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p6.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p6.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p6.png</div></figure><h4 id="Large-Language-Models-are-Effective-Text-Rankers"><a href="#Large-Language-Models-are-Effective-Text-Rankers" class="headerlink" title="Large Language Models are Effective Text Rankers"></a><a href="https://arxiv.org/abs/2306.17563" target="_blank" rel="external nofollow noopener noreferrer">Large Language Models are Effective Text Rankers</a></h4><blockquote><p>ğŸ“„ Paper: <a href="https://arxiv.org/abs/2306.17563" target="_blank" rel="external nofollow noopener noreferrer">https://arxiv.org/abs/2306.17563</a></p></blockquote><p>ä¸Šç¯‡å·¥ä½œè¯æ˜äº†ä½¿ç”¨ LLMs åœ¨ rerank åœºæ™¯çš„æ•ˆæœï¼Œä¸è¿‡ç”±äºå…¶é»‘ç›’ï¼Œå¹¶ä¸”å¯¹åˆå§‹æ®µè½é¡ºåºçš„æ•æ„Ÿï¼ˆä½¿ç”¨ BM25 å¬å›çš„é¡ºåºä¼šä¼˜äºéšæœºé¡ºåºï¼‰ï¼Œä»…èƒ½ä¾é å•†ä¸šå¤§æ¨¡å‹ï¼ˆå¼€æºæ¨¡å‹å¤±è´¥ç‡é«˜ï¼‰ï¼Œç ”ç©¶ä»·å€¼ä¸é«˜ã€‚</p><p>ä¸åŒäºåŸºäº sota æ¨¡å‹åš listwiseï¼Œè¯¥å·¥ä½œæå‡ºäº† PRPï¼ˆPairwise Ranking Promptingï¼‰ ä¸€ç§æ–°ç­–ç•¥ï¼ˆä¸‹å›¾ 1ï¼‰ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯ æ‹†è§£é—®é¢˜ï¼Œæ¯ä¸ªä»»åŠ¡çš„éš¾åº¦é™ä½ï¼Œå¯¹ LLMs çš„èƒ½åŠ›è¦æ±‚ä¹Ÿä¼šé™ä½ã€‚</p><p>é€šè¿‡åˆé€‚çš„è¯„åˆ†æœºåˆ¶ å†ç»“åˆé«˜æ•ˆçš„æ’åºæ–¹å¼ï¼Œèƒ½åšåˆ°åœ¨ å°æ¨¡å‹ä¸Šè¾¾åˆ°ä¸é”™æ•ˆæœã€‚</p><div class="image-row"><figure class="image-bubble row-image"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/3-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p7.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p7.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p7.png</div></figure><figure class="image-bubble row-image"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/4-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p8.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p8.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p8.png</div></figure></div><h4 id="Leveraging-Passage-Embeddings-for-Efficient-Listwise-Reranking-with-Large-Language-Models"><a href="#Leveraging-Passage-Embeddings-for-Efficient-Listwise-Reranking-with-Large-Language-Models" class="headerlink" title="Leveraging Passage Embeddings for Efficient Listwise Reranking with Large Language Models"></a><a href="https://arxiv.org/abs/2406.14848" target="_blank" rel="external nofollow noopener noreferrer">Leveraging Passage Embeddings for Efficient Listwise Reranking with Large Language Models</a></h4><blockquote><p>ğŸ“„ Paper: <a href="https://arxiv.org/abs/2406.14848" target="_blank" rel="external nofollow noopener noreferrer">https://arxiv.org/abs/2406.14848</a></p></blockquote><p>ä¸Šé¢ä¸¤ç¯‡å·¥ä½œéƒ½æ˜¯åŸºäº LLMs è¿›è¡Œ rerank ä»»åŠ¡ï¼Œä½† LLMs ä¼šæœ‰å¹»è§‰ä»¥åŠ latency å±…é«˜ä¸ä¸‹çš„é—®é¢˜ï¼Œæœ¬ç¯‡å·¥ä½œæå‡ºäº†ä¸€ç§ PE Rank çš„æŠ€æœ¯ã€‚</p><p>ä»ç„¶é‡‡ç”¨ listwise çš„æ–¹å¼ï¼Œæœ‰ä¸¤ç§ document çš„å¤„ç†æ–¹å¼ï¼Œå…¶ä¸­ä¸€ç§æ˜¯ä¸ä¼šå°†å¬å›çš„ document ç»™åˆ° LLMsï¼Œè€Œæ˜¯ä¼šå°† document æ›¿æ¢æˆ ç‰¹æ®Šæ ‡è®°ï¼Œç±»ä¼¼äº soft promptï¼Œprompt å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">I will provide you with {{n}} passages, each with a special token representing the passage</span><br><span class="line">enclosed in [].</span><br><span class="line">Rank the passages based on their relevance to the search query: {{query}}.</span><br><span class="line">Passage 1: [{{embedding}}]</span><br><span class="line">...</span><br><span class="line">Passage {{n}}: [{{embedding}}]</span><br><span class="line">Search Query: {{query}}</span><br><span class="line">Rank the {{n}} passages above based on their relevance to the search query in descending order.</span><br><span class="line">Only output the {{n}} unique special token in the ranking.</span><br></pre></td></tr></tbody></table></figure><p></p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div> <img src="https://cdn.jsdelivr.net/gh/SimonAKing/images/loading/2-min.gif" alt="image" title="Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p9.png" data-original="https://cdn.jsdelivr.net/gh/SimonAKing/blog/rerank/p9.png"></div><div class="image-caption">Rerank-ä» BERT åˆ°å¤§æ¨¡å‹çš„æŠ€æœ¯æ—…ç¨‹/p9.png</div></figure><p>æ ¸å¿ƒæœ‰ä¸¤ç‚¹ï¼š</p><ol><li>åœ¨è¾“å…¥æ—¶é€šè¿‡ä¸€ä¸ªè®­ç»ƒå¥½çš„ mlp å±‚å°† token embedding æ˜ å°„æˆ llm embeddingï¼Œèƒ½å¤Ÿå‹ç¼©æ–‡æ¡£ä¸Šä¸‹æ–‡ï¼ˆç±»ä¼¼äº xRagï¼‰ï¼Œç»™åˆ°æ¨¡å‹çš„è¾“å…¥è§å›¾ 3ã€‚</li><li>è¾“å‡ºæ—¶çº¦æŸäº† decode ï¼Œè§£ç ç©ºé—´ ä»…èƒ½åŒ…å«æ–‡æ¡£ IDï¼Œèƒ½æ ¹æ²» LLMs çš„å¹»è§‰é—®é¢˜ï¼Œå› ä¸º è¯è¡¨ç©ºé—´å˜å°äº†ï¼Œæ‰€ä»¥ä¹ŸåŠ å¿«äº†ç”Ÿæˆé€Ÿåº¦ã€‚</li></ol><p>ç›¸åº”çš„åœ¨è®­ç»ƒæ—¶ï¼Œåˆ†ä¸¤é˜¶æ®µ è¾“å…¥çš„æ˜ å°„å±‚è®­ç»ƒï¼Œä»¥åŠ decoding æ—¶çš„æ’åºå­¦ä¹ è®­ç»ƒã€‚</p><h4 id="ä¸šç•Œè¿›å±•"><a href="#ä¸šç•Œè¿›å±•" class="headerlink" title="ä¸šç•Œè¿›å±•"></a>ä¸šç•Œè¿›å±•</h4><p>è¿‘ä¸€å¹´ï¼Œå¤šå®¶ç»„ç»‡/å…¬å¸ æ¨å‡ºäº†å„è‡ªçš„ rerank æ¨¡å‹ï¼Œä¸€äº›äº®ç‚¹ï¼š</p><table><thead><tr><th>æ¨¡å‹</th><th>å‘å¸ƒæ—¶é—´</th><th>äº®ç‚¹</th></tr></thead><tbody><tr><td>Cohere Rerank-3.5</td><td>2024/12/3</td><td>- ç›¸æ¯”å‰ä»£æ¨¡å‹æå‡äº† 10% çš„å‡†ç¡®ç‡</td></tr><tr><td>Jina Reranker v2</td><td>2024/06/25</td><td>- æ”¯æŒè·¨è¯­è¨€é‡æ’ï¼ˆcross-lingual rerankingï¼‰</td></tr><tr><td>BGE Re-Ranker v2.0</td><td>2024/03/18</td><td>- åœ¨ MTEB é‡æ’ä»»åŠ¡ä¸Šè¾¾åˆ° SOTA æ°´å¹³</td></tr></tbody></table><p>è¿™äº›è¿›å±•è¡¨æ˜ï¼Œrerank æœªæ¥ä¼šå‘ç€æ›´é«˜çš„å‡†ç¡®ç‡å’Œæ›´ä½çš„ latency å‘å±•ï¼Œä½¿ç”¨åœºæ™¯ä¹Ÿä¸ä¼šå±€é™äº æ–‡æ¡£æ’åºã€‚</p><hr><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>é€šè¿‡å¯¹ rerank æŠ€æœ¯çš„æ·±å…¥æ¢è®¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p><ol><li><p>æŠ€æœ¯æ¼”è¿›è¶‹åŠ¿</p><ul><li>ä»ç®€å•çš„ BERT äºŒåˆ†ç±»ï¼Œåˆ° T5 ç”Ÿæˆå¼æ–¹æ³•ï¼Œå†åˆ°åˆ©ç”¨å¤§æ¨¡å‹èƒ½åŠ›ï¼Œrerank æŠ€æœ¯åœ¨ä¸æ–­åˆ›æ–°</li><li>ä¸šç•Œæ­£åœ¨æ¢ç´¢å¦‚ä½•å¹³è¡¡æ•ˆæœä¸æ•ˆç‡ï¼Œæ¯”å¦‚é€šè¿‡ embedding å‹ç¼©ã€çº¦æŸè§£ç ç­‰æ–¹å¼ä¼˜åŒ–æ€§èƒ½</li><li>å¼€æºç¤¾åŒºå’Œå•†ä¸šäº§å“éƒ½åœ¨ç§¯ææ¨è¿›ï¼Œä¸ºä¸åŒåœºæ™¯æä¾›äº†ä¸°å¯Œçš„é€‰æ‹©</li></ul></li><li><p>å¯¹ä¸šåŠ¡çš„ä»·å€¼</p><ul><li>æå‡æœç´¢è´¨é‡ï¼šé€šè¿‡æ·±åº¦è¯­ä¹‰ç†è§£ï¼Œèƒ½æ›´å‡†ç¡®åœ°è¯†åˆ«ç”¨æˆ·æ„å›¾ï¼Œå‡å°‘æ— å…³ç»“æœ</li><li>ä¼˜åŒ– RAG åº”ç”¨ï¼šé€šè¿‡ç²¾å‡†çš„æ–‡æ¡£ç­›é€‰å’Œé‡æ’ï¼Œæ˜¾è‘—æå‡å¤§æ¨¡å‹é—®ç­”çš„å‡†ç¡®æ€§</li><li>æ”¯æŒå¤šæ ·åŒ–åœºæ™¯ï¼š<ul><li>äº§å“åˆ†æï¼šæ›´å‡†ç¡®åœ°å‘ç°ç”¨æˆ·åé¦ˆï¼ŒåŒ…æ‹¬åº”ç”¨å•†åº—è¯„è®ºã€ç¤¾äº¤åª’ä½“è®¨è®ºç­‰</li><li>ä¿¡æ¯è½¬åŒ–ï¼šæé«˜ç›¸å…³ä¿¡æ¯çš„å‘ç°æ•ˆç‡ï¼Œé™ä½å™ªéŸ³</li><li>å¯¹è¯åº”ç”¨ï¼šæä¾›æ›´ç²¾å‡†çš„çŸ¥è¯†åº“åŒ¹é…</li><li>â€¦</li></ul></li></ul></li></ol><p>å›é¡¾ rerank çš„å‘å±•å†ç¨‹ï¼Œä» BERT äºŒåˆ†ç±»åˆ°åŸºäº LLM ç­–ç•¥çš„å·¥ä½œï¼ŒæŠ€æœ¯åœ¨ä¸æ–­çªç ´ï¼›ä»å•ä¸€çš„æœç´¢åœºæ™¯åˆ°å¦‚ä»Šçš„ RAG åº”ç”¨ï¼Œä»·å€¼åœ¨æŒç»­æå‡ã€‚éšç€ AI åº”ç”¨çš„æ™®åŠï¼Œrerank ä½œä¸ºè¿æ¥å¬å›å’Œç”Ÿæˆçš„å…³é”®ç¯èŠ‚ï¼Œåœ¨æå‡é—®ç­”è´¨é‡æ–¹é¢å‘æŒ¥ç€é‡è¦çš„ä½œç”¨ã€‚</p><p>æ¬¢è¿è½¬è½½æœ¬ç«™æ–‡ç« ï¼Œè¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ <a href="http://simonaking.com">SimonAKing</a>ã€‚</p></div><div class="recommended_posts"><div class="recommended_wrap"><h2 class="recommended_title">ç›¸å…³æ–‡ç« </h2><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"> <a href="/blog/llm-inference-optimization-en/" rel="bookmark">LLM Inference Optimization Overview - From Data to System Architecture</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"> <a href="/blog/llm-inference-optimization/" rel="bookmark">èŠèŠå¤§æ¨¡å‹æ¨ç†åŠ é€Ÿï¼šä»æ•°æ®åˆ°ç³»ç»Ÿçš„æŠ€æœ¯æ¦‚è¦</a></div></li></ul></div></div><blockquote class="post-copyright"><div class="content"> <span class="post-time">æœ€åæ›´æ–°ï¼š<time datetime="2025-05-02T08:30:48.354Z">2025-05-02 16:30:48</time></span> åŸæ–‡é“¾æ¥ï¼š<a href="/blog/rerank/" target="_blank" rel="external">https://simonaking.com/blog/rerank/</a></div><footer><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/LLM/" rel="tag">LLM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Rerank/" rel="tag">Rerank</a></li></ul><div> <img itemprop="image" lass="copyimg" src="https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/avatar.jpg" alt="SimonAKing"> <a itemprop="author" itemscope itemtype="http://schema.org/Person" href="/blog">SimonAKing</a></div></footer></blockquote></div><section class="comments" id="comments"><div id="disqus_thread"></div></section></article></div></main><div class="mask" id="mask"></div><a href="javascript:;" id="gotop" class="fade-scale waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevronup"></span></a><div class="search-panel in_post" id="search-panel"><ul class="search-result" id="search-result"></ul></div><template id="search-tpl"><li class="item waves-block waves-effect" onclick="location.href='{path}'" data-path="{path}"><div class="title ellipsis" title="{title}">{title}</div></li></template><div id="color-picker" class="page-modal"><a class="close" href="javascript:;"><i class="icon icon-close2"></i></a><br><h4><i class="icon icon-quote-left"></i> <span>RGBè°ƒè‰²å®éªŒå®¤ ğŸ¨</span><i class="icon icon-quote-right"></i></h4><div id="color-picker-container"></div></div><div id="wechat" class="page-modal wechat-wrap"><a class="close" href="javascript:;"><i class="icon icon-close2"></i></a><br><h4 class="wechat-title"> <span style="font-size: 18px">æ¬¢è¿æ·»åŠ æˆ‘çš„å¾®ä¿¡ï¼Œè¿›ç¾¤äº¤æµã€å­¦ä¹ <br><i class="icon icon-quote-left"></i> simonaking<i class="icon icon-quote-right"></i></span></h4> <img id="wechat_img" src="https://cdn.jsdelivr.net/gh/SimonAKing/images/blog/wx.png" alt="æ¬¢è¿æ‚¨çš„å…³æ³¨ï¼" style="margin-top: 5%"></div><script src="https://simonaking.com/registerSW.js?v=7d04115230169"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/js/log.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/src/js/waves.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/headroom.js@0.12.0/dist/headroom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5.2.3/dist/iro.min.js"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/particles-585dd6bbf8.js"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/main-c5641580d9.js"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/script-66d90ba09e.js"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/module/hover-effect-e72a114ce3.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js"></script><script src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/module/post-6d3f729af5.js"></script><script defer src="https://cdn.jsdelivr.net/gh/SimonAKing/blog@7d04115230169/js/module/comment-5cad405b01.js"></script><script defer src="https://cdn.jsdelivr.net/gh/SimonAKing/js/translate-ff7607fcb8.js"></script></body></html>